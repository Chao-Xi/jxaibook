
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Jacob AIå­¦ä¹ ç¬”è®°">
      
      
        <meta name="author" content="Jacob Xi">
      
      
      
        <link rel="prev" href="../../chap7_a2a/3a2a_intro3/">
      
      
        <link rel="next" href="../0agents_demo1/">
      
      
        
      
      
      <link rel="icon" href="../../images/logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>0 OpenAI Responses API ä¸ Agents SDK - Jacob AI Book</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#openai-responses-api-agents-sdk" class="md-skip">
          è·³è½¬è‡³
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="é¡µçœ‰">
    <a href="../.." title="Jacob AI Book" class="md-header__button md-logo" aria-label="Jacob AI Book" data-md-component="logo">
      
  <img src="../../images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Jacob AI Book
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              0 OpenAI Responses API ä¸ Agents SDK
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="æœç´¢" placeholder="æœç´¢" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="æŸ¥æ‰¾">
        
        <button type="reset" class="md-search__icon md-icon" title="æ¸…ç©ºå½“å‰å†…å®¹" aria-label="æ¸…ç©ºå½“å‰å†…å®¹" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            æ­£åœ¨åˆå§‹åŒ–æœç´¢å¼•æ“
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Chao-Xi/jxaibook.git" title="å‰å¾€ä»“åº“" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    jxaibook
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="å¯¼èˆªæ " data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Jacob AI Book" class="md-nav__button md-logo" aria-label="Jacob AI Book" data-md-component="logo">
      
  <img src="../../images/logo.png" alt="logo">

    </a>
    Jacob AI Book
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Chao-Xi/jxaibook.git" title="å‰å¾€ä»“åº“" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    jxaibook
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Welcome
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    AIå¤§æ¨¡å‹åº”ç”¨
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    AIå¤§æ¨¡å‹åº”ç”¨
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap1_ba/1intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1 å¤§æ¨¡å‹çš„ç†è®ºä¸æŠ€æœ¯çš„æ¼”è¿›
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap1_ba/2embedding_openai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2 å¤§æ¨¡å‹å¼€å‘åŸºç¡€ï¼šOpenAIEmbedding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap1_ba/3OpenaiModels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3 å¤§æ¨¡å‹å®æˆ˜--OpenAIå¼€å‘
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap1_ba/4chatgpt_translate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    4 åŸºäº ChatGPT å¼€å‘æ™ºèƒ½ç¿»è¯‘åŠ©æ‰‹
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap1_ba/5AI_PM/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    5 äº§å“ç»ç†çš„ 5 ä¸ª AI çŸ¥è¯†ç‚¹ï¼šLLMã€Agentã€RAGã€å‘é‡æ•°æ®åº“ã€çŸ¥è¯†å›¾è°±
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    AWS AI åº”ç”¨
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    AWS AI åº”ç”¨
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap2_aws/1aws_term/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1 AWS AI è¯æ±‡è¡¨
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap2_aws/2langchain_dynamodb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2 ä½¿ç”¨ LangChainæ­å»ºåŸºäºAmazon DynamoDB çš„å¤§è¯­è¨€æ¨¡å‹åº”ç”¨
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap2_aws/3AmazonBedrock/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3 Amazon Bedrock ç®€ä»‹
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap2_aws/4ML/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    4 ä½ä»£ç æœºå™¨å­¦ä¹ 
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Prompt Engineering
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Prompt Engineering
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap3_prompt/4prompt_exp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    0 Prompt Engineering å¿«é€Ÿå…¥é—¨+å®æˆ˜æ¡ˆä¾‹
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap3_prompt/1prompt_code/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1 Prompts & Use ChatGPT as a Powerful Tool for Programming
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap3_prompt/2prompt_design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2 11ä¸ªé¡¶çº§è®¾è®¡æ¡ˆä¾‹
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap3_prompt/3promt_fin_anylysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3 Prompts for F-Analyst
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Python GPT
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Python GPT
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap4_python/1Meeting_minutes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Creating an automated meeting minutes generator with Whisper and GPT-4
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap4_python/2API_Basic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    chatGPT API basics.
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Python GPT
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Python GPT
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap4_python/1Meeting_minutes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Creating an automated meeting minutes generator with Whisper and GPT-4
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap4_python/2API_Basic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    chatGPT API basics.
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    AIåŸºç¡€å­¦ä¹ 
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    AIåŸºç¡€å­¦ä¹ 
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap2024_zh/1intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1 AI ç®€ä»‹
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap2024_zh/2Prompt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2 Prompt Engineeringï¼Œæç¤ºå·¥ç¨‹
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap2024_zh/3prommaming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3 AI ç¼–ç¨‹ç®€ä»‹
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap2024_zh/4assistantapi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    4 OpenAI çš„ Function Calling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap2024_zh/5rag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    5 RAGå’ŒEmbeddings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Deepseek æ¨¡å‹
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Deepseek æ¨¡å‹
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dp1/1dp1_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1 DeepSeek æ¨¡å‹ä»‹ç»
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Agent å­¦ä¹ 
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Agent å­¦ä¹ 
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5_agents/0agent_qa/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    0 AI Agent åé—®åç­”
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5_agents/1agant_intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1 AI Agentså…¥é—¨æ•™ç¨‹ä¹‹æ¦‚è¿°
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5_agents/2agent_buildout/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2 AI Agentså…¥é—¨æ•™ç¨‹ä¹‹ä»é›¶å¼€å§‹æ„å»ºAgent
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5_agents/3agent_frameworks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3 AI Agentså…¥é—¨æ•™ç¨‹ä¹‹ä»£ç†æ¡†æ¶ä»‹ç»
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5_agents/4agent_types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    4 AI Agentså…¥é—¨æ•™ç¨‹ä¹‹ä¸åŒç±»å‹çš„æ™ºèƒ½ä½“
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5_agents/5agentic_workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    5 ä¸ºä»€ä¹ˆè¡Œä¸šç„¦ç‚¹ä»AI Agentsè½¬å‘Agentic Workflowsï¼Ÿ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5_agents/6agent_school/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    6 ã€ŠAIæ™ºèƒ½ä½“å…¥é—¨ã€‹è¯¾ç¨‹è®²è¿°å†…å®¹
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5_agents/7agai_geai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    7 Agentic AI vs Generative AI: åŒºåˆ«ä¸å¯¹æ¯”
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5_agents/8agent_mcp_intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AI Agents, and the Model Context Protocol
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5_agents/9mcp_intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    8 çˆ†ç«çš„Model Context Protocolæ˜¯ä»€ä¹ˆï¼Ÿ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    MCP å­¦ä¹ 
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    MCP å­¦ä¹ 
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap6_mcp/1mcp_intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    0 MCP ä»‹ç»
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap6_mcp/1mcp_code/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1 ä»£ç è®²é€MCPåŸç†
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap6_mcp/2mcp_construction_principle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2 ä¸€æ–‡è®²é€MCPçš„åŸç†åŠå®è·µ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    A2A å­¦ä¹ 
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    A2A å­¦ä¹ 
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap7_a2a/1a2a_intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1 è°·æ­Œ A2A ï¼ˆAgent2Agentï¼‰æ¶æ„è®¾è®¡æ·±åº¦å‰–æ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap7_a2a/2a2a_intro2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2 å…³äºA2Aã€MCPã€Agentã€LLMçš„6æ¡æç®€äº‹å®
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap7_a2a/3a2a_intro3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3 è°·æ­Œ A2A ä¸ Anthropic MCP åè®®æ·±åº¦è§£æ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" checked>
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Agentic LLMs for Developers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    Agentic LLMs for Developers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    0 OpenAI Responses API ä¸ Agents SDK
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    0 OpenAI Responses API ä¸ Agents SDK
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="ç›®å½•">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ç›®å½•
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-what-is-the-responses-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        1 What Is the Responses API?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chat-completions-api-responses-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        äºŒ Chat Completions API ä¸ Responses API æŠ€æœ¯å¯¹æ¯”è¡¨
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-making-your-first-call" class="md-nav__link">
    <span class="md-ellipsis">
      
        2 Making Your First Call
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 Making Your First Call">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instructions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Instructions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-with-system-user" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example with system + user:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inspecting-the-response" class="md-nav__link">
    <span class="md-ellipsis">
      
        Inspecting the response
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-reasoning-models" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using reasoning models
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      
        3 ä¿ç•™å®¢æˆ·ç«¯å†å²
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 ä¿ç•™å®¢æˆ·ç«¯å†å²">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#professional-lines" class="md-nav__link">
    <span class="md-ellipsis">
      
        å¯ç”¨äºæŠ€æœ¯æ–‡ç« çš„ä¸“ä¸šè¡¨è¿°ï¼ˆProfessional Linesï¼‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        å¦‚ä½•ç”¨æœ¬åœ°æ¨¡å‹å®ç°ä¿ç•™å®¢æˆ·ç«¯å†å²
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="å¦‚ä½•ç”¨æœ¬åœ°æ¨¡å‹å®ç°ä¿ç•™å®¢æˆ·ç«¯å†å²">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ollama-llm" class="md-nav__link">
    <span class="md-ellipsis">
      
        â— æœ¬åœ° Ollama / LLM çš„åŸºæœ¬äº‹å®
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        äºŒã€ä¸ºä»€ä¹ˆä½ â€œä»¥ä¸ºâ€å®ƒä¼šæœ‰å†å²ï¼Ÿ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="äºŒã€ä¸ºä»€ä¹ˆä½ â€œä»¥ä¸ºâ€å®ƒä¼šæœ‰å†å²ï¼Ÿ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-client" class="md-nav__link">
    <span class="md-ellipsis">
      
        âŒ è¯¯åŒº 1ï¼šä»¥ä¸º client ä¼šä¿å­˜ä¸Šä¸‹æ–‡
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-responses-api-chat-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        âŒ è¯¯åŒº 2ï¼šä»¥ä¸º Responses API / Chat API ä¼šâ€œè‡ªåŠ¨æ¥ç€èŠâ€
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="âŒ è¯¯åŒº 2ï¼šä»¥ä¸º Responses API / Chat API ä¼šâ€œè‡ªåŠ¨æ¥ç€èŠâ€">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3-openai-assistants-chatgpt" class="md-nav__link">
    <span class="md-ellipsis">
      
        âŒ è¯¯åŒº 3ï¼šæŠŠ OpenAI Assistants / ChatGPT çš„ä½“éªŒï¼Œè¯¯è®¤ä¸ºæ˜¯æ¨¡å‹èƒ½åŠ›
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#99" class="md-nav__link">
    <span class="md-ellipsis">
      
        ä¸‰ã€99% å‡ºé—®é¢˜çš„ä»£ç ç»“æ„ï¼ˆä½ å¯ä»¥å¯¹ç…§ï¼‰
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ä¸‰ã€99% å‡ºé—®é¢˜çš„ä»£ç ç»“æ„ï¼ˆä½ å¯ä»¥å¯¹ç…§ï¼‰">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        âŒ å¸¸è§é”™è¯¯å†™æ³•ï¼ˆæ²¡æœ‰å†å²ï¼‰
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        å››ã€æ­£ç¡®åšæ³•ï¼ˆå¿…é¡»ä½ è‡ªå·±ç»´æŠ¤å†å²ï¼‰
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="å››ã€æ­£ç¡®åšæ³•ï¼ˆå¿…é¡»ä½ è‡ªå·±ç»´æŠ¤å†å²ï¼‰">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#history" class="md-nav__link">
    <span class="md-ellipsis">
      
        âœ… æ­£ç¡®æ¨¡å¼ï¼šå®¢æˆ·ç«¯æ˜¾å¼ä¿å­˜ history
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-messages-input" class="md-nav__link">
    <span class="md-ellipsis">
      
        1ï¸âƒ£ ç”¨ messages / input åˆ—è¡¨ç´¯ç§¯ä¸Šä¸‹æ–‡
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-chat-completions" class="md-nav__link">
    <span class="md-ellipsis">
      
        2ï¸âƒ£ å¦‚æœä½ ç”¨çš„æ˜¯ Chat Completions é£æ ¼
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#responses-api-responseid" class="md-nav__link">
    <span class="md-ellipsis">
      
        äº”ã€ä¸ºä»€ä¹ˆ Responses API é‡Œçš„ response.id ä¹Ÿæ²¡å¸®ä½ ï¼Ÿ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chatgpt" class="md-nav__link">
    <span class="md-ellipsis">
      
        å…­ã€å¦‚æœä½ æƒ³è¦â€œæ›´åƒ ChatGPTâ€çš„ä½“éªŒï¼Œè¯¥æ€ä¹ˆåšï¼Ÿ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="å…­ã€å¦‚æœä½ æƒ³è¦â€œæ›´åƒ ChatGPTâ€çš„ä½“éªŒï¼Œè¯¥æ€ä¹ˆåšï¼Ÿ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ¨è 3 ä¸ªå·¥ç¨‹çº§æ–¹æ¡ˆï¼ˆä»ç®€å•åˆ°ä¸“ä¸šï¼‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      
        âœ… æ–¹æ¡ˆ 1ï¼šæœ€ç®€å•ï¼ˆåˆ—è¡¨ç´¯ç§¯ï¼‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2conversation-manager" class="md-nav__link">
    <span class="md-ellipsis">
      
        âœ… æ–¹æ¡ˆ 2ï¼šConversation Managerï¼ˆæ¨èï¼‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3agent" class="md-nav__link">
    <span class="md-ellipsis">
      
        ğŸš€ æ–¹æ¡ˆ 3ï¼šAgent æ¶æ„ï¼ˆä½ å·²ç»å¾ˆæ¥è¿‘äº†ï¼‰
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        ä¸ƒã€ä¸ºä»€ä¹ˆè¿™ä¸ªé—®é¢˜éå¸¸å…³é”®ï¼ˆè¯´å¥å®è¯ï¼‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conversation-state-with-openai-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conversation State with OpenAI API
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Conversation State with OpenAI API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simulate-a-conversation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Simulate a conversation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keep-a-client-side-history" class="md-nav__link">
    <span class="md-ellipsis">
      
        Keep a client side history
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openai-apis-for-conversation-state" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenAI APIs for conversation state
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fork-a-response-at-any-point" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fork a response at any point
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openai-api-ollama" class="md-nav__link">
    <span class="md-ellipsis">
      
        äºŒã€ä¸ºä»€ä¹ˆè¿™æ®µä»£ç ã€Œåœ¨ OpenAI å®˜æ–¹ API èƒ½å·¥ä½œï¼Œä½†åœ¨ Ollama ä¸€å®šä¸è¡Œã€
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integrating-tools-web-functions-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        Integrating Tools: Web, Functions, Code
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Integrating Tools: Web, Functions, Code">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#responses-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        ä»æ–‡æœ¬åˆ°è¡ŒåŠ¨ï¼šResponses API å·¥å…·èƒ½åŠ›å…¨è§£æ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#responses-api_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        å·¥å…·å³èƒ½åŠ›ï¼šResponses API çš„æ ¸å¿ƒè®¾è®¡ç†å¿µ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        å‡½æ•°è°ƒç”¨ï¼šè¿æ¥æ¨¡å‹ä¸çœŸå®ç³»ç»Ÿçš„æ¡¥æ¢
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç½‘é¡µæœç´¢ï¼šè·å–å®æ—¶ä¿¡æ¯ï¼Œä½†éœ€è¦æˆæœ¬æ„è¯†
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        å›¾åƒç”Ÿæˆä¸å¤šè½®ç¼–è¾‘ï¼šä»ä¸€æ¬¡ç”Ÿæˆåˆ°æŒç»­åˆ›ä½œ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-interpreter" class="md-nav__link">
    <span class="md-ellipsis">
      
        Code Interpreterï¼šè®©æ¨¡å‹â€œä¼šç®—ã€èƒ½è·‘ã€å¯è§£é‡Šâ€
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-toolsipynb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Code - tools.ipynb
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Code - tools.ipynb">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#function-calling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Function Calling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web-search" class="md-nav__link">
    <span class="md-ellipsis">
      
        Web search
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#image-generation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Image Generation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#follow-up-image-instructions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Follow up image instructions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-interpreter_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Code Interpreter
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file-search" class="md-nav__link">
    <span class="md-ellipsis">
      
        åŸºäº File Search çš„çŸ¥è¯†å‹æ™ºèƒ½åŠ©æ‰‹å®è·µ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="åŸºäº File Search çš„çŸ¥è¯†å‹æ™ºèƒ½åŠ©æ‰‹å®è·µ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-the-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        Create the file
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-vector-store" class="md-nav__link">
    <span class="md-ellipsis">
      
        Create a vector store
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-the-file-to-the-vector-store" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add the file to the vector store
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-status" class="md-nav__link">
    <span class="md-ellipsis">
      
        Check status
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-is-the-openai-agents-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      
        What Is the OpenAI Agents SDK?
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What Is the OpenAI Agents SDK?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-agents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Building Agents
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        å†…å®¹æ€»ç»“ï¼ˆæ¦‚è¿°ï¼‰
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="å†…å®¹æ€»ç»“ï¼ˆæ¦‚è¿°ï¼‰">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#output" class="md-nav__link">
    <span class="md-ellipsis">
      
        Output
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        ä¸€ã€æ•´ä½“æ¶æ„æ€»è§ˆï¼ˆä»ç³»ç»Ÿè§†è§’ï¼‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        äºŒã€æ ¸å¿ƒæ¦‚å¿µé€ä¸€æ‹†è§£
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="äºŒã€æ ¸å¿ƒæ¦‚å¿µé€ä¸€æ‹†è§£">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-agent-prompt" class="md-nav__link">
    <span class="md-ellipsis">
      
        1ï¸âƒ£ Agentï¼šä¸æ˜¯ Promptï¼Œè€Œæ˜¯ã€Œè§’è‰² + èƒ½åŠ› + è¾¹ç•Œã€
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-guardrail-agent" class="md-nav__link">
    <span class="md-ellipsis">
      
        2ï¸âƒ£ Guardrail Agentï¼šæŠŠâ€œå®‰å…¨â€ä»ä¸šåŠ¡é€»è¾‘ä¸­å‰¥ç¦»
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2ï¸âƒ£ Guardrail Agentï¼šæŠŠâ€œå®‰å…¨â€ä»ä¸šåŠ¡é€»è¾‘ä¸­å‰¥ç¦»">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3-guardrailfunctionoutput" class="md-nav__link">
    <span class="md-ellipsis">
      
        3ï¸âƒ£ GuardrailFunctionOutputï¼šæ§åˆ¶æµâ€œé—¸é—¨â€
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-triage-agentagent-manager" class="md-nav__link">
    <span class="md-ellipsis">
      
        4ï¸âƒ£ Triage Agentï¼šçœŸæ­£çš„â€œAgent Managerâ€
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-runnerrun" class="md-nav__link">
    <span class="md-ellipsis">
      
        5ï¸âƒ£ Runner.runï¼šä¸€æ¬¡â€œå—æ§è‡ªæ²»æ‰§è¡Œâ€
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        ä¸‰ã€ä»ç³»ç»Ÿå·¥ç¨‹è§’åº¦çš„è¯„ä»·
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ä¸‰ã€ä»ç³»ç»Ÿå·¥ç¨‹è§’åº¦çš„è¯„ä»·">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        1ï¸âƒ£ èŒè´£åˆ†ç¦»æå…¶æ¸…æ™°
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      
        2ï¸âƒ£ å¯æ‰©å±•æ€§æå¼º
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        3ï¸âƒ£ çœŸå®ç”Ÿäº§çº§æ€è·¯
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        âš ï¸ æ½œåœ¨é—®é¢˜ï¼ˆä¸“å®¶è§†è§’ï¼‰
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="âš ï¸ æ½œåœ¨é—®é¢˜ï¼ˆä¸“å®¶è§†è§’ï¼‰">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        1ï¸âƒ£ æ¨ç†æˆæœ¬åé«˜ï¼ˆæœ¬åœ°æ¨¡å‹å°¤å…¶æ˜æ˜¾ï¼‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-guardrail-json" class="md-nav__link">
    <span class="md-ellipsis">
      
        2ï¸âƒ£ Guardrail çš„ JSON ç¨³å®šæ€§
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-triage-agent-instructions" class="md-nav__link">
    <span class="md-ellipsis">
      
        3ï¸âƒ£ Triage Agent çš„ instructions åå¼±
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openai-agents-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      
        å¯é…ç½®åŒ–æ™ºèƒ½ä½“ï¼šOpenAI Agents SDK çš„å·¥ç¨‹èƒ½åŠ›è§£æ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="å¯é…ç½®åŒ–æ™ºèƒ½ä½“ï¼šOpenAI Agents SDK çš„å·¥ç¨‹èƒ½åŠ›è§£æ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        ä»£ç è¦ç‚¹ï¼ˆå¯ç”¨äºåšå®¢è¯´æ˜ï¼‰
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Output Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Output Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agents-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      
        è¿™æ®µä»£ç åœ¨ Agents SDK ä¸­çš„æŠ€æœ¯å«ä¹‰ï¼ˆéå¸¸é€‚åˆå†™è¿›åšå®¢ï¼‰
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dynamic-instructions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dynamic Instructions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dynamic Instructions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agents-sdk_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        ğŸ“Œ è¿™æ®µä»£ç åœ¨ Agents SDK ä¸­çš„æ ¸å¿ƒæ„ä¹‰ï¼ˆåšå®¢å¯ç›´æ¥ä½¿ç”¨ï¼‰
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forcing-tool-use" class="md-nav__link">
    <span class="md-ellipsis">
      
        Forcing Tool Use
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#orchestrating-multi-step-workflows" class="md-nav__link">
    <span class="md-ellipsis">
      
        Orchestrating Multi-step Workflows
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Orchestrating Multi-step Workflows">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#manage-agent-conversation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Manage Agent Conversation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Manage Agent Conversation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        ä»£ç è¦ç‚¹è¯´æ˜ï¼ˆç®€è¦ï¼‰
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automatically-manage-conversations-with-sessions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Automatically Manage Conversations with Sessions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../0agents_demo1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    0 ä»é›¶æ„å»ºä¸€ä¸ªå¤šæ™ºèƒ½ä½“æ—…è¡Œè§„åˆ’ç³»ç»Ÿï¼šåŸºäº OpenAI Agents SDK çš„å·¥ç¨‹åŒ–å®è·µ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1ai_agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1 Introduction to Developing AI Agents
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2ai_agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ç¬¬ä¸€ç«  åˆè¯†æ™ºèƒ½ä½“
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../3ai_agents_his/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ç¬¬äºŒç«  æ™ºèƒ½ä½“å‘å±•å²
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    AI Agent Daily Blogs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    AI Agent Daily Blogs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1agents_intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1 AI Agent æŠ€æœ¯æ ˆå…¨æ™¯å›¾ï¼šLLMã€MCP/Function Calling ä¸ A2A åè®®å®æˆ˜
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../4agent_arg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2 Agentic RAG ä¸ƒå¤§æ¶æ„èŒƒå¼æ·±åº¦è§£æï¼šä»å•æ™ºèƒ½ä½“åˆ°ç«¯åˆ°ç«¯è‡ªåŠ¨åŒ–
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5Agent_google/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3 Google AI Agent ç™½çš®ä¹¦æ·±åº¦æ‹†è§£
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="ç›®å½•">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ç›®å½•
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-what-is-the-responses-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        1 What Is the Responses API?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chat-completions-api-responses-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        äºŒ Chat Completions API ä¸ Responses API æŠ€æœ¯å¯¹æ¯”è¡¨
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-making-your-first-call" class="md-nav__link">
    <span class="md-ellipsis">
      
        2 Making Your First Call
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 Making Your First Call">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instructions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Instructions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-with-system-user" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example with system + user:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inspecting-the-response" class="md-nav__link">
    <span class="md-ellipsis">
      
        Inspecting the response
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-reasoning-models" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using reasoning models
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      
        3 ä¿ç•™å®¢æˆ·ç«¯å†å²
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 ä¿ç•™å®¢æˆ·ç«¯å†å²">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#professional-lines" class="md-nav__link">
    <span class="md-ellipsis">
      
        å¯ç”¨äºæŠ€æœ¯æ–‡ç« çš„ä¸“ä¸šè¡¨è¿°ï¼ˆProfessional Linesï¼‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        å¦‚ä½•ç”¨æœ¬åœ°æ¨¡å‹å®ç°ä¿ç•™å®¢æˆ·ç«¯å†å²
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="å¦‚ä½•ç”¨æœ¬åœ°æ¨¡å‹å®ç°ä¿ç•™å®¢æˆ·ç«¯å†å²">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ollama-llm" class="md-nav__link">
    <span class="md-ellipsis">
      
        â— æœ¬åœ° Ollama / LLM çš„åŸºæœ¬äº‹å®
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        äºŒã€ä¸ºä»€ä¹ˆä½ â€œä»¥ä¸ºâ€å®ƒä¼šæœ‰å†å²ï¼Ÿ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="äºŒã€ä¸ºä»€ä¹ˆä½ â€œä»¥ä¸ºâ€å®ƒä¼šæœ‰å†å²ï¼Ÿ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-client" class="md-nav__link">
    <span class="md-ellipsis">
      
        âŒ è¯¯åŒº 1ï¼šä»¥ä¸º client ä¼šä¿å­˜ä¸Šä¸‹æ–‡
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-responses-api-chat-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        âŒ è¯¯åŒº 2ï¼šä»¥ä¸º Responses API / Chat API ä¼šâ€œè‡ªåŠ¨æ¥ç€èŠâ€
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="âŒ è¯¯åŒº 2ï¼šä»¥ä¸º Responses API / Chat API ä¼šâ€œè‡ªåŠ¨æ¥ç€èŠâ€">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3-openai-assistants-chatgpt" class="md-nav__link">
    <span class="md-ellipsis">
      
        âŒ è¯¯åŒº 3ï¼šæŠŠ OpenAI Assistants / ChatGPT çš„ä½“éªŒï¼Œè¯¯è®¤ä¸ºæ˜¯æ¨¡å‹èƒ½åŠ›
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#99" class="md-nav__link">
    <span class="md-ellipsis">
      
        ä¸‰ã€99% å‡ºé—®é¢˜çš„ä»£ç ç»“æ„ï¼ˆä½ å¯ä»¥å¯¹ç…§ï¼‰
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ä¸‰ã€99% å‡ºé—®é¢˜çš„ä»£ç ç»“æ„ï¼ˆä½ å¯ä»¥å¯¹ç…§ï¼‰">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        âŒ å¸¸è§é”™è¯¯å†™æ³•ï¼ˆæ²¡æœ‰å†å²ï¼‰
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        å››ã€æ­£ç¡®åšæ³•ï¼ˆå¿…é¡»ä½ è‡ªå·±ç»´æŠ¤å†å²ï¼‰
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="å››ã€æ­£ç¡®åšæ³•ï¼ˆå¿…é¡»ä½ è‡ªå·±ç»´æŠ¤å†å²ï¼‰">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#history" class="md-nav__link">
    <span class="md-ellipsis">
      
        âœ… æ­£ç¡®æ¨¡å¼ï¼šå®¢æˆ·ç«¯æ˜¾å¼ä¿å­˜ history
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-messages-input" class="md-nav__link">
    <span class="md-ellipsis">
      
        1ï¸âƒ£ ç”¨ messages / input åˆ—è¡¨ç´¯ç§¯ä¸Šä¸‹æ–‡
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-chat-completions" class="md-nav__link">
    <span class="md-ellipsis">
      
        2ï¸âƒ£ å¦‚æœä½ ç”¨çš„æ˜¯ Chat Completions é£æ ¼
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#responses-api-responseid" class="md-nav__link">
    <span class="md-ellipsis">
      
        äº”ã€ä¸ºä»€ä¹ˆ Responses API é‡Œçš„ response.id ä¹Ÿæ²¡å¸®ä½ ï¼Ÿ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chatgpt" class="md-nav__link">
    <span class="md-ellipsis">
      
        å…­ã€å¦‚æœä½ æƒ³è¦â€œæ›´åƒ ChatGPTâ€çš„ä½“éªŒï¼Œè¯¥æ€ä¹ˆåšï¼Ÿ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="å…­ã€å¦‚æœä½ æƒ³è¦â€œæ›´åƒ ChatGPTâ€çš„ä½“éªŒï¼Œè¯¥æ€ä¹ˆåšï¼Ÿ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ¨è 3 ä¸ªå·¥ç¨‹çº§æ–¹æ¡ˆï¼ˆä»ç®€å•åˆ°ä¸“ä¸šï¼‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      
        âœ… æ–¹æ¡ˆ 1ï¼šæœ€ç®€å•ï¼ˆåˆ—è¡¨ç´¯ç§¯ï¼‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2conversation-manager" class="md-nav__link">
    <span class="md-ellipsis">
      
        âœ… æ–¹æ¡ˆ 2ï¼šConversation Managerï¼ˆæ¨èï¼‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3agent" class="md-nav__link">
    <span class="md-ellipsis">
      
        ğŸš€ æ–¹æ¡ˆ 3ï¼šAgent æ¶æ„ï¼ˆä½ å·²ç»å¾ˆæ¥è¿‘äº†ï¼‰
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        ä¸ƒã€ä¸ºä»€ä¹ˆè¿™ä¸ªé—®é¢˜éå¸¸å…³é”®ï¼ˆè¯´å¥å®è¯ï¼‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conversation-state-with-openai-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conversation State with OpenAI API
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Conversation State with OpenAI API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simulate-a-conversation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Simulate a conversation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keep-a-client-side-history" class="md-nav__link">
    <span class="md-ellipsis">
      
        Keep a client side history
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openai-apis-for-conversation-state" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenAI APIs for conversation state
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fork-a-response-at-any-point" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fork a response at any point
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openai-api-ollama" class="md-nav__link">
    <span class="md-ellipsis">
      
        äºŒã€ä¸ºä»€ä¹ˆè¿™æ®µä»£ç ã€Œåœ¨ OpenAI å®˜æ–¹ API èƒ½å·¥ä½œï¼Œä½†åœ¨ Ollama ä¸€å®šä¸è¡Œã€
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integrating-tools-web-functions-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        Integrating Tools: Web, Functions, Code
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Integrating Tools: Web, Functions, Code">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#responses-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        ä»æ–‡æœ¬åˆ°è¡ŒåŠ¨ï¼šResponses API å·¥å…·èƒ½åŠ›å…¨è§£æ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#responses-api_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        å·¥å…·å³èƒ½åŠ›ï¼šResponses API çš„æ ¸å¿ƒè®¾è®¡ç†å¿µ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        å‡½æ•°è°ƒç”¨ï¼šè¿æ¥æ¨¡å‹ä¸çœŸå®ç³»ç»Ÿçš„æ¡¥æ¢
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç½‘é¡µæœç´¢ï¼šè·å–å®æ—¶ä¿¡æ¯ï¼Œä½†éœ€è¦æˆæœ¬æ„è¯†
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        å›¾åƒç”Ÿæˆä¸å¤šè½®ç¼–è¾‘ï¼šä»ä¸€æ¬¡ç”Ÿæˆåˆ°æŒç»­åˆ›ä½œ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-interpreter" class="md-nav__link">
    <span class="md-ellipsis">
      
        Code Interpreterï¼šè®©æ¨¡å‹â€œä¼šç®—ã€èƒ½è·‘ã€å¯è§£é‡Šâ€
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-toolsipynb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Code - tools.ipynb
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Code - tools.ipynb">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#function-calling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Function Calling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web-search" class="md-nav__link">
    <span class="md-ellipsis">
      
        Web search
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#image-generation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Image Generation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#follow-up-image-instructions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Follow up image instructions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-interpreter_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Code Interpreter
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file-search" class="md-nav__link">
    <span class="md-ellipsis">
      
        åŸºäº File Search çš„çŸ¥è¯†å‹æ™ºèƒ½åŠ©æ‰‹å®è·µ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="åŸºäº File Search çš„çŸ¥è¯†å‹æ™ºèƒ½åŠ©æ‰‹å®è·µ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-the-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        Create the file
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-vector-store" class="md-nav__link">
    <span class="md-ellipsis">
      
        Create a vector store
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-the-file-to-the-vector-store" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add the file to the vector store
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-status" class="md-nav__link">
    <span class="md-ellipsis">
      
        Check status
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-is-the-openai-agents-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      
        What Is the OpenAI Agents SDK?
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What Is the OpenAI Agents SDK?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-agents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Building Agents
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        å†…å®¹æ€»ç»“ï¼ˆæ¦‚è¿°ï¼‰
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="å†…å®¹æ€»ç»“ï¼ˆæ¦‚è¿°ï¼‰">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#output" class="md-nav__link">
    <span class="md-ellipsis">
      
        Output
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        ä¸€ã€æ•´ä½“æ¶æ„æ€»è§ˆï¼ˆä»ç³»ç»Ÿè§†è§’ï¼‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        äºŒã€æ ¸å¿ƒæ¦‚å¿µé€ä¸€æ‹†è§£
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="äºŒã€æ ¸å¿ƒæ¦‚å¿µé€ä¸€æ‹†è§£">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-agent-prompt" class="md-nav__link">
    <span class="md-ellipsis">
      
        1ï¸âƒ£ Agentï¼šä¸æ˜¯ Promptï¼Œè€Œæ˜¯ã€Œè§’è‰² + èƒ½åŠ› + è¾¹ç•Œã€
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-guardrail-agent" class="md-nav__link">
    <span class="md-ellipsis">
      
        2ï¸âƒ£ Guardrail Agentï¼šæŠŠâ€œå®‰å…¨â€ä»ä¸šåŠ¡é€»è¾‘ä¸­å‰¥ç¦»
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2ï¸âƒ£ Guardrail Agentï¼šæŠŠâ€œå®‰å…¨â€ä»ä¸šåŠ¡é€»è¾‘ä¸­å‰¥ç¦»">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3-guardrailfunctionoutput" class="md-nav__link">
    <span class="md-ellipsis">
      
        3ï¸âƒ£ GuardrailFunctionOutputï¼šæ§åˆ¶æµâ€œé—¸é—¨â€
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-triage-agentagent-manager" class="md-nav__link">
    <span class="md-ellipsis">
      
        4ï¸âƒ£ Triage Agentï¼šçœŸæ­£çš„â€œAgent Managerâ€
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-runnerrun" class="md-nav__link">
    <span class="md-ellipsis">
      
        5ï¸âƒ£ Runner.runï¼šä¸€æ¬¡â€œå—æ§è‡ªæ²»æ‰§è¡Œâ€
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        ä¸‰ã€ä»ç³»ç»Ÿå·¥ç¨‹è§’åº¦çš„è¯„ä»·
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ä¸‰ã€ä»ç³»ç»Ÿå·¥ç¨‹è§’åº¦çš„è¯„ä»·">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        1ï¸âƒ£ èŒè´£åˆ†ç¦»æå…¶æ¸…æ™°
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      
        2ï¸âƒ£ å¯æ‰©å±•æ€§æå¼º
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        3ï¸âƒ£ çœŸå®ç”Ÿäº§çº§æ€è·¯
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        âš ï¸ æ½œåœ¨é—®é¢˜ï¼ˆä¸“å®¶è§†è§’ï¼‰
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="âš ï¸ æ½œåœ¨é—®é¢˜ï¼ˆä¸“å®¶è§†è§’ï¼‰">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        1ï¸âƒ£ æ¨ç†æˆæœ¬åé«˜ï¼ˆæœ¬åœ°æ¨¡å‹å°¤å…¶æ˜æ˜¾ï¼‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-guardrail-json" class="md-nav__link">
    <span class="md-ellipsis">
      
        2ï¸âƒ£ Guardrail çš„ JSON ç¨³å®šæ€§
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-triage-agent-instructions" class="md-nav__link">
    <span class="md-ellipsis">
      
        3ï¸âƒ£ Triage Agent çš„ instructions åå¼±
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openai-agents-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      
        å¯é…ç½®åŒ–æ™ºèƒ½ä½“ï¼šOpenAI Agents SDK çš„å·¥ç¨‹èƒ½åŠ›è§£æ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="å¯é…ç½®åŒ–æ™ºèƒ½ä½“ï¼šOpenAI Agents SDK çš„å·¥ç¨‹èƒ½åŠ›è§£æ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        ä»£ç è¦ç‚¹ï¼ˆå¯ç”¨äºåšå®¢è¯´æ˜ï¼‰
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Output Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Output Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agents-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      
        è¿™æ®µä»£ç åœ¨ Agents SDK ä¸­çš„æŠ€æœ¯å«ä¹‰ï¼ˆéå¸¸é€‚åˆå†™è¿›åšå®¢ï¼‰
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dynamic-instructions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dynamic Instructions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dynamic Instructions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agents-sdk_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        ğŸ“Œ è¿™æ®µä»£ç åœ¨ Agents SDK ä¸­çš„æ ¸å¿ƒæ„ä¹‰ï¼ˆåšå®¢å¯ç›´æ¥ä½¿ç”¨ï¼‰
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forcing-tool-use" class="md-nav__link">
    <span class="md-ellipsis">
      
        Forcing Tool Use
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#orchestrating-multi-step-workflows" class="md-nav__link">
    <span class="md-ellipsis">
      
        Orchestrating Multi-step Workflows
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Orchestrating Multi-step Workflows">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#manage-agent-conversation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Manage Agent Conversation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Manage Agent Conversation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        ä»£ç è¦ç‚¹è¯´æ˜ï¼ˆç®€è¦ï¼‰
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automatically-manage-conversations-with-sessions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Automatically Manage Conversations with Sessions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="openai-responses-api-agents-sdk">OpenAI Responses API ä¸ Agents SDK</h1>
<h2 id="1-what-is-the-responses-api">1 What Is the Responses API?</h2>
<p>Responses API æ˜¯ OpenAI æ¨å‡ºçš„æ–°ä¸€ä»£æ ¸å¿ƒ APIï¼Œæ—¨åœ¨ç»Ÿä¸€å¹¶å‡çº§ç°æœ‰çš„å¤šç§æ¥å£èƒ½åŠ›ï¼Œä¸ºæ„å»ºç°ä»£åŒ–ã€å…·å¤‡è¡ŒåŠ¨èƒ½åŠ›ï¼ˆagenticï¼‰çš„ AI åº”ç”¨æä¾›åŸºç¡€è®¾æ–½ã€‚</p>
<p>åœ¨æ—©æœŸé˜¶æ®µï¼ŒOpenAI å…ˆåæ¨å‡ºäº† <strong>Completions API</strong>ï¼ˆæ–‡æœ¬ç”Ÿæˆï¼‰ã€<strong>Chat Completions API</strong>ï¼ˆå¯¹è¯äº¤äº’ï¼‰ä»¥åŠ <strong>Assistants API</strong>ï¼ˆå·¥å…·è°ƒç”¨ä¸ä»£ç†èƒ½åŠ›ï¼‰ã€‚è¿™äº› API å„è‡ªæœåŠ¡äºä¸åŒåœºæ™¯ï¼Œä½†ä¹Ÿç»™å¼€å‘è€…å¸¦æ¥äº†é€‰æ‹©æˆæœ¬å’Œæ¶æ„å¤æ‚æ€§ã€‚</p>
<p>Responses API çš„æ ¸å¿ƒç›®æ ‡æ˜¯ <strong>â€œä¸€ä½“åŒ–â€</strong> â€”â€” å°†æ–‡æœ¬ç”Ÿæˆã€å¯¹è¯ã€å¤šè½®çŠ¶æ€ç®¡ç†ã€å·¥å…·è°ƒç”¨ï¼ˆå¦‚ç½‘é¡µæœç´¢ã€æ–‡ä»¶è®¿é—®ã€ä»£ç æ‰§è¡Œï¼‰ä»¥åŠä»£ç†å¼å·¥ä½œæµç»Ÿä¸€åˆ°ä¸€ä¸ª API ä¸­ã€‚<strong>å®ƒä¸ä»…ç»§æ‰¿äº† Chat Completions çš„æ˜“ç”¨æ€§ï¼Œè¿˜æ•´åˆäº† Assistants API çš„é«˜çº§èƒ½åŠ›ï¼Œå¹¶è¢«å®˜æ–¹å®šä½ä¸ºåè€…çš„æ›¿ä»£æ–¹æ¡ˆ</strong>ã€‚</p>
<p>æ ¹æ® OpenAI å…¬å‘Šï¼ŒAssistants API è®¡åˆ’äº 2026 å¹´é€æ­¥å¼ƒç”¨ï¼Œå¼€å‘è€…åº”å¼€å§‹å‘ Responses API è¿ç§»ã€‚</p>
<p>ä¸ Chat Completions API ç›¸æ¯”ï¼ŒResponses API åœ¨æ–‡æœ¬ç”Ÿæˆè´¨é‡ä¸Šå¹¶æ— å·®å¼‚ï¼Œä½†åœ¨åŠŸèƒ½å±‚é¢æ˜¾è‘—å¢å¼ºï¼šå®ƒåŸç”Ÿæ”¯æŒå·¥å…·è°ƒç”¨ã€å†…å»ºçŠ¶æ€ç®¡ç†ï¼ˆæ— éœ€æ‰‹åŠ¨ç»´æŠ¤å¯¹è¯ä¸Šä¸‹æ–‡ï¼‰ã€æ”¯æŒ MCPï¼ˆModel Context Protocolï¼‰ï¼Œå¹¶å¯ç”¨äºæ„å»ºå¤šæ­¥éª¤å†³ç­–ä¸æ‰§è¡Œçš„æ™ºèƒ½ä½“å·¥ä½œæµã€‚</p>
<p>å› æ­¤ï¼ŒResponses API ç‰¹åˆ«é€‚åˆéœ€è¦ <strong>æµè§ˆç½‘é¡µã€è§£ææ–‡ä»¶ã€æ‰§è¡Œä»£ç ã€è‡ªåŠ¨è§„åˆ’ä¸å†³ç­–</strong> çš„åº”ç”¨åœºæ™¯ï¼Œä¹Ÿè¢«è§†ä¸º OpenAI å¹³å°æœªæ¥ Agent æ¶æ„çš„æ ¸å¿ƒåŸºçŸ³ã€‚</p>
<h2 id="chat-completions-api-responses-api">äºŒ Chat Completions API ä¸ Responses API æŠ€æœ¯å¯¹æ¯”è¡¨</h2>
<table>
<thead>
<tr>
<th>å¯¹æ¯”ç»´åº¦</th>
<th>Chat Completions API</th>
<th>Responses API</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>API å®šä½</strong></td>
<td>å¯¹è¯å¼æ–‡æœ¬ç”Ÿæˆæ¥å£</td>
<td>ç»Ÿä¸€çš„æ™ºèƒ½ä½“ï¼ˆAgentï¼‰æ ¸å¿ƒ API</td>
</tr>
<tr>
<td><strong>è®¾è®¡ç›®æ ‡</strong></td>
<td>ç®€å•å¯¹è¯ä¸æ–‡æœ¬ç”Ÿæˆ</td>
<td>é¢å‘è¡ŒåŠ¨çš„ AI åº”ç”¨ä¸ Agent å·¥ä½œæµ</td>
</tr>
<tr>
<td><strong>æ–‡æœ¬ç”Ÿæˆèƒ½åŠ›</strong></td>
<td>âœ… é«˜è´¨é‡æ–‡æœ¬ç”Ÿæˆ</td>
<td>âœ… åŒç­‰é«˜è´¨é‡æ–‡æœ¬ç”Ÿæˆ</td>
</tr>
<tr>
<td><strong>å¤šè½®å¯¹è¯æ”¯æŒ</strong></td>
<td>âœ… æ”¯æŒ</td>
<td>âœ… æ”¯æŒ</td>
</tr>
<tr>
<td><strong>çŠ¶æ€ç®¡ç†</strong></td>
<td>âŒ éœ€å¼€å‘è€…æ‰‹åŠ¨ç»´æŠ¤ä¸Šä¸‹æ–‡</td>
<td>âœ… å†…å»ºçŠ¶æ€ç®¡ç†ï¼ˆResponse / Conversation IDï¼‰</td>
</tr>
<tr>
<td><strong>å·¥å…·è°ƒç”¨ï¼ˆToolsï¼‰</strong></td>
<td>âŒ ä¸æ”¯æŒ</td>
<td>âœ… åŸç”Ÿæ”¯æŒ</td>
</tr>
<tr>
<td><strong>å†…å»ºå·¥å…·ç±»å‹</strong></td>
<td>âŒ æ— </td>
<td>âœ… Web Search / File Read / Code Execution / Computer Use</td>
</tr>
<tr>
<td><strong>æ–‡ä»¶å¤„ç†èƒ½åŠ›</strong></td>
<td>âŒ ä¸æ”¯æŒ</td>
<td>âœ… æ”¯æŒè¯»å–ä¸è§£ææ–‡ä»¶ï¼ˆå¦‚ PDFï¼‰</td>
</tr>
<tr>
<td><strong>ä»£ç æ‰§è¡Œèƒ½åŠ›</strong></td>
<td>âŒ ä¸æ”¯æŒ</td>
<td>âœ… å†…å»º Code Interpreter</td>
</tr>
<tr>
<td><strong>Agentic Workflow</strong></td>
<td>âŒ ä¸é€‚åˆ</td>
<td>âœ… åŸç”Ÿæ”¯æŒå¤šæ­¥éª¤å†³ç­–ä¸æ‰§è¡Œ</td>
</tr>
<tr>
<td><strong>è§„åˆ’ä¸æ¨ç†èƒ½åŠ›</strong></td>
<td>âš ï¸ éœ€è‡ªè¡Œå°è£…</td>
<td>âœ… å†…å»º Reason â†’ Plan â†’ Act â†’ Observe æ¨¡å¼</td>
</tr>
<tr>
<td><strong>MCP æ”¯æŒ</strong></td>
<td>âŒ ä¸æ”¯æŒ</td>
<td>âœ… æ”¯æŒ Model Context Protocol</td>
</tr>
<tr>
<td><strong>è¾“å‡ºç»“æ„</strong></td>
<td>ä»¥ <code>message</code> ä¸ºä¸»</td>
<td>å¤šç±»å‹è¾“å‡ºï¼ˆtext / tool-call / search-call ç­‰ï¼‰</td>
</tr>
<tr>
<td><strong>å¼•ç”¨ / æ³¨è§£ï¼ˆCitationsï¼‰</strong></td>
<td>âŒ æ— </td>
<td>âœ… æ”¯æŒ annotationsï¼ˆå¦‚æœç´¢å¼•ç”¨ï¼‰</td>
</tr>
<tr>
<td><strong>æ¨¡å‹å¯ç”¨æ€§</strong></td>
<td>æ–‡æœ¬æ¨¡å‹ä¸ºä¸»</td>
<td>éƒ¨åˆ†å¸¦å·¥å…·æ¨¡å‹ä»…æ”¯æŒ Responses API</td>
</tr>
<tr>
<td><strong>å¤æ‚åº¦</strong></td>
<td>â­ ç®€å•ã€æ˜“ä¸Šæ‰‹</td>
<td>â­â­ åŠŸèƒ½å¼ºã€ç»“æ„æ›´ä¸°å¯Œ</td>
</tr>
<tr>
<td><strong>é€‚ç”¨åœºæ™¯</strong></td>
<td>èŠå¤©æœºå™¨äººã€æ–‡æœ¬ç”Ÿæˆ</td>
<td>æ™ºèƒ½åŠ©æ‰‹ã€è‡ªåŠ¨åŒ–ä»»åŠ¡ã€AI Agent</td>
</tr>
<tr>
<td><strong>æœªæ¥å‘å±•æ–¹å‘</strong></td>
<td>é•¿æœŸæŒç»­æ”¯æŒ</td>
<td>OpenAI Agent ç”Ÿæ€çš„æ ¸å¿ƒ API</td>
</tr>
<tr>
<td><strong>å®˜æ–¹æ€åº¦</strong></td>
<td>ç»§ç»­ç»´æŠ¤</td>
<td>æ¨èä½œä¸ºä¸»åŠ›å¼€å‘æ¥å£</td>
</tr>
</tbody>
</table>
<p><strong>Text generation comparison in Python</strong> </p>
<p><img alt="Alt Image Text" src="../../images/chap8_0_1.png" title="Body image" /></p>
<p><strong>Output Comparison</strong></p>
<p><img alt="Alt Image Text" src="../../images/chap8_0_2.png" title="Body image" />  </p>
<h2 id="2-making-your-first-call">2 Making Your First Call</h2>
<p>æœ¬èŠ‚å†…å®¹å›´ç»• Responses API çš„åŸºæœ¬ä½¿ç”¨æµç¨‹ä¸è¿”å›ç»“æœè§£æ å±•å¼€ï¼Œé€šè¿‡å®æ“æ¼”ç¤ºå¸®åŠ©å­¦ä¹ è€…ç†è§£ä»ç¯å¢ƒå‡†å¤‡åˆ°é¦–æ¬¡ API è°ƒç”¨çš„å®Œæ•´é“¾è·¯ã€‚</p>
<p>åœ¨å®é™…å·¥ç¨‹å®è·µä¸­ï¼Œæœ¬è¯¾ç¨‹ç¤ºä¾‹å·²è°ƒæ•´ä¸º ä½¿ç”¨ Ollama è¿è¡Œæœ¬åœ°æ¨¡å‹ï¼ˆå¦‚ qwen2.5:7bã€deepseek-r1ï¼‰ï¼Œä»¥æ›¿ä»£è¿œç¨‹ OpenAI APIã€‚è¿™ç§æ–¹å¼å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<p>æ¨ç†ä¸ç”Ÿæˆå®Œå…¨åœ¨æœ¬åœ°å®Œæˆï¼Œé€‚ç”¨äºå¯¹æ•°æ®éšç§å’Œç¦»çº¿èƒ½åŠ›è¦æ±‚è¾ƒé«˜çš„åœºæ™¯</p>
<p>API è°ƒç”¨æ–¹å¼åœ¨è¯­ä¹‰ä¸Šä¿æŒä¸€è‡´ï¼Œä½†ä¸ä¾èµ– OpenAI è´¦æˆ·ã€API Key æˆ–è®¡è´¹ä½“ç³»</p>
<p>éƒ¨åˆ† OpenAI Responses API çš„é«˜çº§ç‰¹æ€§ï¼ˆå¦‚ç»“æ„åŒ– reasoning å­—æ®µï¼‰åœ¨æœ¬åœ°æ¨¡å‹ä¸­ä»¥â€œæ–‡æœ¬æ¨ç†â€çš„å½¢å¼ä½“ç°ï¼Œéœ€è¦é€šè¿‡ Prompt è®¾è®¡è¿›è¡Œå¼•å¯¼</p>
<p>è¿™ä¸€å®è·µè·¯å¾„æ›´è´´è¿‘ä¼ä¸šå†…ç½‘éƒ¨ç½²ã€ç§æœ‰åŒ– AI Agent ç³»ç»Ÿå’Œæˆæœ¬å¯æ§çš„ç”Ÿäº§ç¯å¢ƒã€‚       </p>
<pre><code>import json
from openai import OpenAI

client = OpenAI(
    api_key=&quot;ollama&quot;,  # éšä¾¿å†™
    base_url=&quot;http://localhost:11434/v1&quot;
)
</code></pre>
<pre><code>response = client.responses.create(
    model=&quot;qwen2.5:7b&quot;,
    input=&quot;Write one sentence about OpenAI Responses API.&quot;
)

print(response.output_text)
</code></pre>
<blockquote>
<p>The OpenAI Responses API enables developers to integrate sophisticated text generation and conversational AI capabilities into their applications by accessing a powerful language model.</p>
</blockquote>
<h3 id="instructions">Instructions</h3>
<pre><code>response = client.responses.create(
    model=&quot;qwen2.5:7b&quot;,
    instructions=&quot;Talk like a pirate.&quot;,
    input=&quot;How are you?&quot;,
)

print(response.output_text)
</code></pre>
<blockquote>
<p>Arrr, matey! How be ye doin' today? Be ye feelin' swashbucklin' or perhaps ye be landlubberin'?</p>
</blockquote>
<h3 id="example-with-system-user">Example with system + user:</h3>
<pre><code>response = client.responses.create(
    model=&quot;qwen2.5:7b&quot;,
    input=[
        {
            &quot;role&quot;: &quot;system&quot;,
            &quot;content&quot;: &quot;You are a helpful assistant who replies in bullet points.&quot;,
        },
        {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Give me tips to focus better while studying.&quot;},
    ],
)
</code></pre>
<pre><code>print(response.output_text)  # Main assistant reply (shortcut)
</code></pre>
<pre><code>- Set clear goals for each study session
- Create a dedicated and organized study space
- Use a timer for focused work intervals (e.g., Pomodoro Technique)
- Minimize distractions by turning off notifications
- Maintain good posture to improve mental clarity
- Take regular breaks to avoid burnout
- Stay hydrated and eat healthily
- Use flashcards or quizzes to test retention
- Break large tasks into smaller, manageable parts
</code></pre>
<h3 id="inspecting-the-response">Inspecting the response</h3>
<pre><code>print(response.output)  # Full structured output
</code></pre>
<blockquote>
<p>[ResponseOutputMessage(id='msg_619012', content=[ResponseOutputText(annotations=None, text='- Set clear goals for each study session\n- Create a dedicated and organized study space\n- Use a timer for focused work intervals (e.g., Pomodoro Technique)\n- Minimize distractions by turning off notifications\n- Maintain good posture to improve mental clarity\n- Take regular breaks to avoid burnout\n- Stay hydrated and eat healthily\n- Use flashcards or quizzes to test retention\n- Break large tasks into smaller, manageable parts', type='output_text', logprobs=None)], role='assistant', status='completed', type='message')]</p>
</blockquote>
<pre><code>from pprint import pprint

pprint(response.model_dump())
</code></pre>
<pre><code>{'background': None,
 'conversation': None,
 'created_at': 1765721564.0,
 'error': None,
 'id': 'resp_100363',
 'incomplete_details': None,
 'instructions': None,
 'max_output_tokens': None,
 'max_tool_calls': None,
 'metadata': None,
 'model': 'qwen2.5:7b',
 'object': 'response',
 'output': [{'content': [{'annotations': None,
                          'logprobs': None,
                          'text': '- Set clear goals for each study session\n'
                                  '- Create a dedicated and organized study '
                                  'space\n'
                                  '- Use a timer for focused work intervals '
                                  '(e.g., Pomodoro Technique)\n'
                                  '- Minimize distractions by turning off '
                                  'notifications\n'
                                  '- Maintain good posture to improve mental '
                                  'clarity\n'
                                  '- Take regular breaks to avoid burnout\n'
                                  '- Stay hydrated and eat healthily\n'
                                  '- Use flashcards or quizzes to test '
                                  'retention\n'
                                  '- Break large tasks into smaller, '
                                  'manageable parts',
                          'type': 'output_text'}],
             'id': 'msg_619012',
             'role': 'assistant',
             'status': 'completed',
             'type': 'message'}],
 'parallel_tool_calls': None,
 'previous_response_id': None,
 'prompt': None,
 'prompt_cache_key': None,
 'prompt_cache_retention': None,
 'reasoning': None,
 'safety_identifier': None,
 'service_tier': None,
 'status': 'completed',
 'temperature': None,
 'text': None,
 'tool_choice': None,
 'tools': None,
 'top_logprobs': None,
 'top_p': None,
 'truncation': None,
 'usage': {'input_tokens': 33,
           'input_tokens_details': None,
           'output_tokens': 90,
           'output_tokens_details': None,
           'total_tokens': 123},
 'user': None}
</code></pre>
<pre><code># You can also inspect:
print(response.usage.output_tokens)  # Token usage
print(response.usage.total_tokens)  # Total token usage
# print(response.reasoning.effort)
print(response.id)
</code></pre>
<pre><code>90
123
resp_100363
</code></pre>
<h3 id="using-reasoning-models">Using reasoning models</h3>
<p>âœ… åªæœ‰ OpenAI å®˜æ–¹ reasoning æ¨¡å‹ æ‰æ”¯æŒï¼š</p>
<table>
<thead>
<tr>
<th>OpenAI reasoning</th>
<th>æœ¬åœ°æ¨¡å‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ¨ç† token å•ç‹¬è§£ç </td>
<td>âŒ</td>
</tr>
<tr>
<td>æ¨ç†ç»“æ„åŒ–è¿”å›</td>
<td>âŒ</td>
</tr>
<tr>
<td>æ§åˆ¶æ¨ç†å¼ºåº¦</td>
<td>âŒ</td>
</tr>
<tr>
<td>æ¨ç†ä¸å›ç­”åˆ†ç¦»</td>
<td>âŒ</td>
</tr>
</tbody>
</table>
<p><strong>æ—¢ç„¶æ¨¡å‹ä¸æ”¯æŒ reasoning.effortï¼Œé‚£å°±ç”¨è‡ªç„¶è¯­è¨€æç¤ºï¼š</strong></p>
<pre><code>prompt = &quot;&quot;&quot;
Please reason step by step and explain your logic clearly.

Question:
Whatâ€™s the next number in the sequence: 2, 6, 12, 20, ...?
&quot;&quot;&quot;


response = client.responses.create(
    model=&quot;deepseek-r1:1.5b&quot;,
    # reasoning={&quot;effort&quot;: &quot;medium&quot;},
    input=[{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: prompt}],
)

# âœ… åªæœ‰ OpenAI å®˜æ–¹ reasoning æ¨¡å‹ æ‰æ”¯æŒï¼š

# reasoning.effort

# response.reasoning

# å¯æ§æ¨ç†å¼ºåº¦

print(response.output_text)
</code></pre>
<pre><code>&lt;think&gt;
First, I'll look at the given numbers: 2, 6, 12, 20.

Next, I'll calculate the differences between each consecutive pair to find a pattern:

- 6 - 2 = 4
- 12 - 6 = 6
- 20 - 12 = 8

The differences are 4, 6, and 8. These numbers increase by 2 each time.

To determine the next difference, I'll add 2 to the last difference:

4 (previous difference) + 2 = 6

Finally, I'll add this new difference to the last number in the sequence to find the fifth term:

20 + 6 = 26
&lt;/think&gt;

**Solution:**

The given sequence is:  
2,â€ƒ6,â€ƒ12,â€ƒ20,â€ƒ...

To find the next number in the sequence, let's analyze the pattern.

1. **Calculate the Differences Between Consecutive Terms:**
   - First difference: \( 6 - 2 = 4 \)
   - Second difference: \( 12 - 6 = 6 \)
   - Third difference: \( 20 - 12 = 8 \)

2. **Identify the Pattern in Differences:**
   - The differences are increasing by **2** each time**:  
     4,â€ƒ6,â€ƒ8,â€ƒ...

3. **Predict the Next Difference:**
   - Following the pattern, the next difference will be \( 8 + 2 = 10 \).

4. **Determine the Next Term in the Sequence:**
   - Add this new difference to the last term:  
     \( 20 + 10 = 30 \)

**Final Answer:**  
\boxed{30}
</code></pre>
<pre><code>print(response.usage)  # Token usage
# print(response.reasoning.effort)
</code></pre>
<blockquote>
<p>ResponseUsage(input_tokens=42, input_tokens_details=None, output_tokens=390, output_tokens_details=None, total_tokens=432)</p>
</blockquote>
<p>Responses API ä¸ºæ„å»ºé¢å‘è¡ŒåŠ¨çš„ AI åº”ç”¨æä¾›äº†ç»Ÿä¸€æ¥å£ï¼Œè€Œåœ¨æœ¬åœ°åŒ–å®è·µä¸­ï¼Œç»“åˆ Ollama è¿è¡Œ qwen2.5 ä¸ deepseek-r1 ç­‰æ¨¡å‹ï¼Œå¯ä»¥åœ¨ä¿æŒ Agent æ¶æ„ä¸€è‡´æ€§çš„åŒæ—¶ï¼Œå®ç°æ›´é«˜çš„æ•°æ®å¯æ§æ€§ä¸éƒ¨ç½²çµæ´»æ€§ã€‚</p>
<p><strong>é€šè¿‡è§£æ Responses API çš„è¿”å›ç»“æ„ï¼Œå¼€å‘è€…ä¸ä»…å¯ä»¥è·å–æ¨¡å‹è¾“å‡ºç»“æœï¼Œè¿˜èƒ½å¤Ÿç³»ç»Ÿæ€§åœ°ç®¡ç†è¯·æ±‚çŠ¶æ€ã€ä¸Šä¸‹æ–‡ä¿¡æ¯ä¸æ¨ç†æˆæœ¬ï¼Œè¿™ä¸ºæ„å»ºå¤æ‚çš„ Agent å·¥ä½œæµå¥ å®šäº†å·¥ç¨‹åŸºç¡€</strong>ã€‚</p>
<p>åœ¨æœ¬åœ°å¤§æ¨¡å‹ç¯å¢ƒä¸‹ï¼Œæ¨ç†èƒ½åŠ›æ›´å¤šä½“ç°åœ¨ç”Ÿæˆè¿‡ç¨‹æœ¬èº«ï¼Œè€Œéç»“æ„åŒ–å­—æ®µé…ç½®ï¼Œå› æ­¤ Prompt è®¾è®¡æˆä¸ºå½±å“æ¨ç†è´¨é‡ä¸å“åº”ç¨³å®šæ€§çš„å…³é”®å› ç´ ã€‚</p>
<p>ç›¸è¾ƒäºä¼ ç»Ÿçš„æ–‡æœ¬ç”Ÿæˆæ¥å£ï¼Œé¢å‘ Agent çš„ API è®¾è®¡æ›´å¼ºè°ƒâ€œè§„åˆ’â€”è¡ŒåŠ¨â€”åé¦ˆâ€çš„é—­ç¯ï¼Œè¿™ä¸€æ€æƒ³åŒæ ·é€‚ç”¨äºæœ¬åœ°å¤§æ¨¡å‹é©±åŠ¨çš„æ™ºèƒ½ä½“ç³»ç»Ÿã€‚</p>
<h2 id="3">3 ä¿ç•™å®¢æˆ·ç«¯å†å²</h2>
<p>æœ¬æ®µå†…å®¹å›´ç»• <strong>å¯¹è¯çŠ¶æ€ï¼ˆConversation Stateï¼‰ç®¡ç†</strong> å±•å¼€ï¼Œç³»ç»Ÿé˜è¿°äº†å…¶é‡è¦æ€§ã€å®ç°æ–¹å¼ä»¥åŠåœ¨ Responses API ä¸­çš„å…·ä½“åº”ç”¨ä¸å–èˆã€‚</p>
<p>é¦–å…ˆå¼ºè°ƒäº†å¯¹è¯çŠ¶æ€çš„ä»·å€¼å¹¶ä¸ä»…é™äºâ€œè®°ä½ç”¨æˆ·è¯´è¿‡çš„è¯â€ï¼Œè€Œæ˜¯ç›´æ¥å½±å“åˆ°å¤šè½®äº¤äº’ä¸­çš„<strong>å‡†ç¡®æ€§ã€ä¸€è‡´æ€§ä¸æ¨ç†èƒ½åŠ›</strong>ã€‚</p>
<p>è‰¯å¥½çš„ä¸Šä¸‹æ–‡ç®¡ç†å¯ä»¥å¸®åŠ©æ¨¡å‹åœ¨è¿ç»­å¯¹è¯ä¸­ä¿æŒæ­£ç¡®ç†è§£ï¼Œé™ä½é‡å¤è¾“å…¥å¸¦æ¥çš„ Token æ¶ˆè€—ä¸æˆæœ¬ï¼Œ<strong>åŒæ—¶æ”¯æŒä»ä»»æ„å†å²èŠ‚ç‚¹è¿›è¡Œå¯¹è¯åˆ†æ”¯ï¼ˆforkï¼‰ï¼Œå¹¶ä¸ºæ›´å¤æ‚çš„æ¨ç†å’Œå·¥å…·è°ƒç”¨æ‰“ä¸‹åŸºç¡€</strong>ã€‚</p>
<p>éšåï¼Œå†…å®¹é€šè¿‡ä»£ç ç¤ºä¾‹å±•ç¤ºäº†<strong>æ‰‹åŠ¨ç®¡ç†ä¸Šä¸‹æ–‡</strong>çš„åŸºæœ¬æ€è·¯ï¼šå°†ç”¨æˆ·ä¸åŠ©æ‰‹çš„æ¯ä¸€è½®æ¶ˆæ¯æŒ‰é¡ºåºå­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œå¹¶åœ¨æ¯æ¬¡è¯·æ±‚æ—¶å°†å®Œæ•´çš„æ¶ˆæ¯æ•°ç»„ä½œä¸ºè¾“å…¥å‘é€ç»™æ¨¡å‹ã€‚</p>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ¨¡å‹èƒ½å¤Ÿç†è§£å®Œæ•´çš„å¯¹è¯å†å²ï¼Œä»è€Œåœ¨â€œå†æ¥ä¸€ä¸ªâ€â€œç»§ç»­åˆšæ‰çš„è¯é¢˜â€ç­‰æ¨¡ç³ŠæŒ‡ä»¤ä¸‹ç»™å‡ºç¬¦åˆè¯­å¢ƒçš„å›åº”ã€‚è¿™ç§æ–¹å¼çµæ´»ã€å¯æ§ï¼Œä½†éœ€è¦å¼€å‘è€…è‡ªè¡Œç»´æŠ¤ä¸Šä¸‹æ–‡ç»“æ„ã€‚</p>
<p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œä»‹ç»äº† Responses API æä¾›çš„ <strong>è‡ªåŠ¨åŒ–ä¸Šä¸‹æ–‡ç®¡ç†æœºåˆ¶</strong>ã€‚</p>
<p>é€šè¿‡åœ¨è¯·æ±‚ä¸­ä¼ å…¥ <code>previous_response_id</code>ï¼Œå¼€å‘è€…æ— éœ€æ‰‹åŠ¨æ‹¼æ¥å†å²æ¶ˆæ¯ï¼ŒAPI ä¼šè‡ªåŠ¨å°†å½“å‰è¯·æ±‚ä¸æŒ‡å®šçš„å†å²å“åº”ä¸²è”èµ·æ¥ï¼Œå½¢æˆåŒä¸€æ¡å¯¹è¯é“¾ã€‚<strong>ç¤ºä¾‹ä¸­é€šè¿‡â€œè‹¹æœé—®é¢˜â€æ¸…æ™°åœ°æ¼”ç¤ºäº†å¤šè½®æ¨ç†èƒ½åŠ›ï¼šå³ä½¿åç»­é—®é¢˜ä¸­æœªæ˜¾å¼é‡å¤ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæ¨¡å‹ä»èƒ½åŸºäºå…ˆå‰çŠ¶æ€ç»™å‡ºæ­£ç¡®ç»“æœ</strong>ã€‚</p>
<p>Responses API çš„å¦ä¸€é¡¹é‡è¦èƒ½åŠ›æ˜¯ <strong>å¯¹è¯åˆ†æ”¯ï¼ˆForkingï¼‰</strong>ã€‚å¼€å‘è€…å¯ä»¥åŸºäºä»»æ„å†å²å“åº”åˆ›å»ºæ–°çš„å¯¹è¯åˆ†æ”¯ï¼Œè¿™ç§æœºåˆ¶ç±»ä¼¼äºåœ¨ ChatGPT Web UI ä¸­â€œç¼–è¾‘å†å²æ¶ˆæ¯åé‡æ–°ç”Ÿæˆâ€ï¼Œéå¸¸é€‚åˆæ¢ç´¢ä¸åŒæ¨ç†è·¯å¾„æˆ–å‡è®¾åœºæ™¯ã€‚</p>
<p>æœ€åï¼Œå†…å®¹æŒ‡å‡ºäº†è‡ªåŠ¨ä¸Šä¸‹æ–‡ç®¡ç†çš„<strong>æ½œåœ¨æˆæœ¬é—®é¢˜</strong>ã€‚éšç€å¯¹è¯é“¾ä¸æ–­å¢é•¿ï¼Œè¾“å…¥ Token æ•°é‡ä¼šæŒç»­ç´¯ç§¯ï¼Œè¿›è€Œæ˜¾è‘—æé«˜è°ƒç”¨æˆæœ¬ï¼Œå¹¶æœ€ç»ˆè§¦åŠæ¨¡å‹çš„ä¸Šä¸‹æ–‡é•¿åº¦ä¸Šé™ã€‚å¯¹æ­¤ï¼Œè¯¾ç¨‹å±•ç¤ºäº†ä¸€ç§æŠ˜ä¸­æ–¹æ¡ˆï¼šé€šè¿‡åˆ é™¤æ—©æœŸå“åº”æ¥æˆªæ–­å¯¹è¯é“¾ï¼Œä»è€Œé™ä½ Token ä½¿ç”¨é‡ã€‚ä½†ä»£ä»·æ˜¯æ¨¡å‹å°†ä¸å†â€œè®°å¾—â€è¢«åˆ é™¤çš„å†å²å†…å®¹ã€‚ç”±æ­¤å¾—å‡ºç»“è®ºï¼šåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œ<strong>æ‰‹åŠ¨ç®¡ç†ä¸Šä¸‹æ–‡å¹¶ç»“åˆæˆªæ–­ã€æ‘˜è¦ç­‰ç­–ç•¥ï¼Œå¾€å¾€åœ¨æˆæœ¬ä¸æ§åˆ¶åŠ›ä¹‹é—´æ›´å…·ä¼˜åŠ¿</strong>ã€‚</p>
<h3 id="professional-lines">å¯ç”¨äºæŠ€æœ¯æ–‡ç« çš„ä¸“ä¸šè¡¨è¿°ï¼ˆProfessional Linesï¼‰</h3>
<blockquote>
<p>å¯¹è¯çŠ¶æ€ç®¡ç†ä¸ä»…å†³å®šäº†å¤šè½®äº¤äº’çš„è¿è´¯æ€§ï¼Œä¹Ÿç›´æ¥å½±å“æ¨¡å‹æ¨ç†å‡†ç¡®æ€§ã€Token ä½¿ç”¨æ•ˆç‡ä»¥åŠæ•´ä½“è°ƒç”¨æˆæœ¬ã€‚</p>
<p>Responses API é€šè¿‡ <code>previous_response_id</code> æä¾›äº†è‡ªåŠ¨åŒ–çš„ä¸Šä¸‹æ–‡ä¸²è”æœºåˆ¶ï¼Œä½¿å¤šè½®å¯¹è¯ä¸åˆ†æ”¯æ¢ç´¢åœ¨å·¥ç¨‹å®ç°ä¸Šæ›´åŠ ç®€æ´ã€‚</p>
<p>å¯¹è¯åˆ†æ”¯èƒ½åŠ›ä¸ºå¼€å‘è€…æä¾›äº†ç±»ä¼¼ç‰ˆæœ¬æ§åˆ¶çš„äº¤äº’ä½“éªŒï¼Œèƒ½å¤Ÿåœ¨åŒä¸€ä¸Šä¸‹æ–‡åŸºç¡€ä¸Šå¹¶è¡Œæ¢ç´¢ä¸åŒæ¨ç†è·¯å¾„ã€‚</p>
<p>è‡ªåŠ¨ä¸Šä¸‹æ–‡ç®¡ç†è™½ç„¶é™ä½äº†å¼€å‘å¤æ‚åº¦ï¼Œä½†éšç€å¯¹è¯é“¾å¢é•¿ï¼ŒToken æˆæœ¬ä¹Ÿä¼šçº¿æ€§ä¸Šå‡ï¼Œå› æ­¤åœ¨ç”Ÿäº§ç¯å¢ƒä¸­éœ€è¦ç»“åˆæˆªæ–­æˆ–æ‘˜è¦ç­–ç•¥è¿›è¡Œä¼˜åŒ–ã€‚</p>
<p>åœ¨å¤æ‚æˆ–é•¿å‘¨æœŸå¯¹è¯åœºæ™¯ä¸‹ï¼Œæ˜¾å¼çš„å®¢æˆ·ç«¯ä¾§ä¸Šä¸‹æ–‡ç®¡ç†å¾€å¾€èƒ½åœ¨å¯æ§æ€§ä¸æˆæœ¬ä¹‹é—´å–å¾—æ›´å¥½çš„å¹³è¡¡ã€‚</p>
</blockquote>
<h3 id="_1">å¦‚ä½•ç”¨æœ¬åœ°æ¨¡å‹å®ç°ä¿ç•™å®¢æˆ·ç«¯å†å²</h3>
<h4 id="ollama-llm">â— æœ¬åœ° Ollama / LLM çš„åŸºæœ¬äº‹å®</h4>
<table>
<thead>
<tr>
<th>èƒ½åŠ›</th>
<th>æ˜¯å¦å­˜åœ¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>è‡ªåŠ¨è®°ä½ä¸Šä¸€æ¬¡è¯·æ±‚</td>
<td>âŒ</td>
</tr>
<tr>
<td>å®¢æˆ·ç«¯è‡ªåŠ¨ä¼šè¯ç®¡ç†</td>
<td>âŒ</td>
</tr>
<tr>
<td>ç±»ä¼¼ ChatGPT çš„â€œå¯¹è¯è®°å¿†â€</td>
<td>âŒ</td>
</tr>
<tr>
<td>æœåŠ¡ç«¯ä¿å­˜ conversation</td>
<td>âŒ</td>
</tr>
</tbody>
</table>
<p>ğŸ‘‰ <strong>æ¯ä¸€æ¬¡è°ƒç”¨éƒ½æ˜¯å…¨æ–°çš„æ¨ç†</strong></p>
<h3 id="_2">äºŒã€ä¸ºä»€ä¹ˆä½ â€œä»¥ä¸ºâ€å®ƒä¼šæœ‰å†å²ï¼Ÿ</h3>
<p>ä½ å¾ˆå¯èƒ½é‡åˆ°äº†ä¸‹é¢ä¹‹ä¸€ï¼ˆæˆ–å¤šä¸ªï¼‰ğŸ‘‡</p>
<h4 id="1-client">âŒ è¯¯åŒº 1ï¼šä»¥ä¸º <code>client</code> ä¼šä¿å­˜ä¸Šä¸‹æ–‡</h4>
<pre><code class="language-python">client = OpenAI(...)
</code></pre>
<p>æˆ–ï¼ˆOllama å…¼å®¹å†™æ³•ï¼‰</p>
<pre><code class="language-python">client = OpenAI(base_url=&quot;http://localhost:11434/v1&quot;)
</code></pre>
<p>ğŸ‘‰ <strong>client åªæ˜¯ HTTP å®¢æˆ·ç«¯ï¼Œä¸æ˜¯ä¼šè¯å¯¹è±¡</strong></p>
<p>å®ƒä¸ä¼šä¿å­˜ï¼š</p>
<ul>
<li>ä¸Šä¸€æ¬¡ prompt</li>
<li>ä¸Šä¸€æ¬¡ response</li>
<li>ä¸Šä¸€æ¬¡ token</li>
</ul>
<h3 id="2-responses-api-chat-api">âŒ è¯¯åŒº 2ï¼šä»¥ä¸º Responses API / Chat API ä¼šâ€œè‡ªåŠ¨æ¥ç€èŠâ€</h3>
<p>æ¯”å¦‚ç±»ä¼¼ï¼š</p>
<pre><code class="language-python">response = client.responses.create(
    model=&quot;qwen2.5:7b&quot;,
    input=&quot;ç»§ç»­åˆšæ‰çš„è¯&quot;
)
</code></pre>
<p>æ¨¡å‹å®é™…æ”¶åˆ°çš„æ˜¯ï¼š</p>
<pre><code>â€œç»§ç»­åˆšæ‰çš„è¯â€
</code></pre>
<p>ä½†å®ƒ<strong>æ ¹æœ¬ä¸çŸ¥é“â€œåˆšæ‰çš„è¯â€æ˜¯ä»€ä¹ˆ</strong>ã€‚</p>
<h4 id="3-openai-assistants-chatgpt">âŒ è¯¯åŒº 3ï¼šæŠŠ OpenAI Assistants / ChatGPT çš„ä½“éªŒï¼Œè¯¯è®¤ä¸ºæ˜¯æ¨¡å‹èƒ½åŠ›</h4>
<p>ChatGPT èƒ½â€œè®°ä½â€æ˜¯å› ä¸ºï¼š</p>
<ul>
<li>æµè§ˆå™¨åœ¨<strong>ä¸æ–­æŠŠå®Œæ•´å†å²å‘å›æœåŠ¡å™¨</strong></li>
<li>ä½ çœ‹åˆ°çš„æ˜¯ <strong>UI å±‚åšçš„çŠ¶æ€ç®¡ç†</strong></li>
<li>ä¸æ˜¯æ¨¡å‹è‡ªå·±â€œè®°å¾—â€</li>
</ul>
<h3 id="99">ä¸‰ã€99% å‡ºé—®é¢˜çš„ä»£ç ç»“æ„ï¼ˆä½ å¯ä»¥å¯¹ç…§ï¼‰</h3>
<h4 id="_3">âŒ å¸¸è§é”™è¯¯å†™æ³•ï¼ˆæ²¡æœ‰å†å²ï¼‰</h4>
<pre><code class="language-python">def ask_llm(prompt):
    response = client.responses.create(
        model=&quot;deepseek-r1&quot;,
        input=prompt
    )
    return response.output_text
</code></pre>
<p>ç„¶åï¼š</p>
<pre><code class="language-python">ask_llm(&quot;ä½ å¥½&quot;)
ask_llm(&quot;æˆ‘åˆšæ‰è¯´äº†ä»€ä¹ˆï¼Ÿ&quot;)
</code></pre>
<p>ğŸ‘‰ ç¬¬äºŒæ¬¡è°ƒç”¨ <strong>å®Œå…¨ä¸çŸ¥é“ç¬¬ä¸€æ¬¡å‘ç”Ÿäº†ä»€ä¹ˆ</strong></p>
<h3 id="_4">å››ã€æ­£ç¡®åšæ³•ï¼ˆå¿…é¡»ä½ è‡ªå·±ç»´æŠ¤å†å²ï¼‰</h3>
<h4 id="history">âœ… æ­£ç¡®æ¨¡å¼ï¼šå®¢æˆ·ç«¯æ˜¾å¼ä¿å­˜ history</h4>
<h4 id="1-messages-input">1ï¸âƒ£ ç”¨ messages / input åˆ—è¡¨ç´¯ç§¯ä¸Šä¸‹æ–‡</h4>
<pre><code class="language-python">conversation = []

def chat(user_input):
    conversation.append({
        &quot;role&quot;: &quot;user&quot;,
        &quot;content&quot;: user_input
    })

    response = client.responses.create(
        model=&quot;qwen2.5:7b&quot;,
        input=conversation
    )

    assistant_reply = response.output_text

    conversation.append({
        &quot;role&quot;: &quot;assistant&quot;,
        &quot;content&quot;: assistant_reply
    })

    return assistant_reply
</code></pre>
<p>è¿™æ ·æ‰æ˜¯<strong>çœŸæ­£çš„â€œå¯¹è¯â€</strong>ã€‚</p>
<h4 id="2-chat-completions">2ï¸âƒ£ å¦‚æœä½ ç”¨çš„æ˜¯ Chat Completions é£æ ¼</h4>
<pre><code class="language-python">messages = [
    {&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;}
]

def chat(user_msg):
    messages.append({&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: user_msg})

    resp = client.chat.completions.create(
        model=&quot;qwen2.5:7b&quot;,
        messages=messages
    )

    reply = resp.choices[0].message.content
    messages.append({&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: reply})
    return reply
</code></pre>
<h3 id="responses-api-responseid">äº”ã€ä¸ºä»€ä¹ˆ Responses API é‡Œçš„ <code>response.id</code> ä¹Ÿæ²¡å¸®ä½ ï¼Ÿ</h3>
<p>ä½ å¯èƒ½æ³¨æ„åˆ°è¿”å›é‡Œæœ‰ï¼š</p>
<pre><code class="language-json">&quot;id&quot;: &quot;resp-xxxxx&quot;
</code></pre>
<p>âš ï¸ <strong>æ³¨æ„è¿™ä¸ªé‡è¦äº‹å®</strong>ï¼š</p>
<blockquote>
<p>åœ¨ Ollama / æœ¬åœ°æ¨¡å‹ä¸­ï¼Œ<code>response.id</code>
âŒ ä¸ä»£è¡¨ä¼šè¯
âŒ ä¸ä»£è¡¨ conversation
âŒ ä¸èƒ½è‡ªåŠ¨ç»­èŠ</p>
</blockquote>
<p>å®ƒåªæ˜¯ä¸€æ¬¡è¯·æ±‚çš„ IDï¼Œç”¨äºæ—¥å¿—æˆ–è°ƒè¯•ã€‚</p>
<h3 id="chatgpt">å…­ã€å¦‚æœä½ æƒ³è¦â€œæ›´åƒ ChatGPTâ€çš„ä½“éªŒï¼Œè¯¥æ€ä¹ˆåšï¼Ÿ</h3>
<h4 id="3_1">æ¨è 3 ä¸ªå·¥ç¨‹çº§æ–¹æ¡ˆï¼ˆä»ç®€å•åˆ°ä¸“ä¸šï¼‰</h4>
<hr />
<h4 id="1">âœ… æ–¹æ¡ˆ 1ï¼šæœ€ç®€å•ï¼ˆåˆ—è¡¨ç´¯ç§¯ï¼‰</h4>
<p>é€‚åˆ Notebook / Demo / å­¦ä¹ </p>
<pre><code class="language-python">history = []
</code></pre>
<h4 id="2conversation-manager">âœ… æ–¹æ¡ˆ 2ï¼šConversation Managerï¼ˆæ¨èï¼‰</h4>
<pre><code class="language-python">class Conversation:
    def __init__(self, system_prompt):
        self.messages = [{&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: system_prompt}]

    def ask(self, user_input):
        self.messages.append({&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: user_input})
        resp = client.responses.create(
            model=&quot;deepseek-r1&quot;,
            input=self.messages
        )
        reply = resp.output_text
        self.messages.append({&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: reply})
        return reply
</code></pre>
<h4 id="3agent">ğŸš€ æ–¹æ¡ˆ 3ï¼šAgent æ¶æ„ï¼ˆä½ å·²ç»å¾ˆæ¥è¿‘äº†ï¼‰</h4>
<ul>
<li>Memory æ¨¡å—</li>
<li>Planner</li>
<li>Tool Router</li>
<li>History Truncationï¼ˆé˜² token çˆ†ç‚¸ï¼‰</li>
</ul>
<h3 id="_5">ä¸ƒã€ä¸ºä»€ä¹ˆè¿™ä¸ªé—®é¢˜<strong>éå¸¸å…³é”®</strong>ï¼ˆè¯´å¥å®è¯ï¼‰</h3>
<p>ä½ ç°åœ¨é—®çš„è¿™ä¸ªé—®é¢˜ï¼Œ<strong>æ­£å¥½æ˜¯ä»â€œä¼šè°ƒç”¨æ¨¡å‹â€ â†’ â€œä¼šåš Agent ç³»ç»Ÿâ€ çš„åˆ†æ°´å²­</strong>ã€‚</p>
<blockquote>
<p><strong>90% çš„åˆå­¦è€…éƒ½ä»¥ä¸ºæ˜¯æ¨¡å‹ä¸è¡Œ
å…¶å®æ˜¯è‡ªå·±æ²¡åšçŠ¶æ€ç®¡ç†</strong></p>
</blockquote>
<h3 id="conversation-state-with-openai-api">Conversation State with OpenAI API</h3>
<p><strong>Why Conversation State Is Critical</strong></p>
<ul>
<li>Accuracy across multiple turns</li>
<li>Reducing token usage</li>
<li>Fork and continue</li>
<li>Deeper reasoning and tool use</li>
</ul>
<pre><code>import json
from openai import OpenAI

with open(&quot;../config.json&quot;) as f:
    config = json.load(f)

# Access API key
api_key = config[&quot;openai_api_key&quot;]

client = OpenAI(api_key=api_key)
</code></pre>
<h4 id="simulate-a-conversation">Simulate a conversation</h4>
<pre><code>response = client.responses.create(
    model=&quot;gpt-4.1&quot;,
    input=[
        {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;What is 5+5?&quot;},
        {&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;10&quot;},
        {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Now subtract 2 from it.&quot;},
    ],
)

print(response.output_text)
</code></pre>
<blockquote>
<p>10 - 2 = <strong>8</strong></p>
</blockquote>
<h4 id="keep-a-client-side-history">Keep a client side history</h4>
<pre><code>history = [{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;tell me a joke&quot;}]

response = client.responses.create(model=&quot;gpt-4o-mini&quot;, input=history, store=False)

print(response.output_text)

# Add the response to the conversation
history += [{&quot;role&quot;: el.role, &quot;content&quot;: el.content} for el in response.output]

history.append({&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;tell me another&quot;})

second_response = client.responses.create(
    model=&quot;gpt-4o-mini&quot;, input=history, store=False
)

print(second_response.output_text)
</code></pre>
<p>Output</p>
<pre><code>Why did the scarecrow win an award?  

Because he was outstanding in his field!
Why donâ€™t skeletons fight each other?  

They donâ€™t have the guts!
</code></pre>
<h4 id="openai-apis-for-conversation-state">OpenAI APIs for conversation state</h4>
<pre><code># Message 1: John receives apples
first_response = client.responses.create(
    model=&quot;gpt-4o&quot;,
    input=&quot;John has 5 apples. Emma has 10. Emma gives him 3 apples. How many apples do John and Emma have now?&quot;,
)
print(&quot;Response 1:&quot;, first_response.output_text)
</code></pre>
<pre><code>10 - 2 = **8**

Why did the scarecrow win an award?  

Because he was outstanding in his field!
Why donâ€™t skeletons fight each other?  

They donâ€™t have the guts!
Response 1: Initially, John has 5 apples and Emma has 10 apples. If Emma gives John 3 apples:

- John will have: 5 + 3 = 8 apples
- Emma will have: 10 - 3 = 7 apples

So, John now has 8 apples and Emma has 7 apples.
</code></pre>
<pre><code># Message 2: John eats apples, continuing the thread
second_response = client.responses.create(
    model=&quot;gpt-4o-mini&quot;,
    previous_response_id=first_response.id,
    input=[
        {
            &quot;role&quot;: &quot;user&quot;,
            &quot;content&quot;: &quot;Then he eats 2 apples. How many does he have left?&quot;,
        }
    ],
)
print(&quot;Response 2:&quot;, second_response.output_text)
</code></pre>
<pre><code>Response 2: If John has 8 apples and he eats 2, he will have:

8 - 2 = 6 apples left.

So, John now has 6 apples.
</code></pre>
<pre><code># Message 3: John gives half to Emma
third_response = client.responses.create(
    model=&quot;gpt-4o-mini&quot;,
    previous_response_id=second_response.id,
    input=[
        {
            &quot;role&quot;: &quot;user&quot;,
            &quot;content&quot;: &quot;He gives half of them to Emma. How many apples does each person have now?&quot;,
        }
    ],
)
print(&quot;Response 3:&quot;, third_response.output_text)
</code></pre>
<pre><code>10 - 2 = **8**

Why did the scarecrow win an award?  

Because he was outstanding in his field!
Why donâ€™t skeletons fight each other?  

They donâ€™t have the guts!
Response 1: Initially, John has 5 apples and Emma has 10 apples. If Emma gives John 3 apples:

- John will have: 5 + 3 = 8 apples
- Emma will have: 10 - 3 = 7 apples

So, John now has 8 apples and Emma has 7 apples.
Response 2: If John has 8 apples and he eats 2, he will have:

8 - 2 = 6 apples left.

So, John now has 6 apples.
Response 3: If John has 6 apples and he gives half to Emma, he will give away:

6 / 2 = 3 apples.

Now, after giving 3 apples to Emma:

- John's apples: 6 - 3 = 3 apples
- Emma's apples: 7 + 3 = 10 apples

So, John has 3 apples and Emma has 10 apples now.
</code></pre>
<h4 id="fork-a-response-at-any-point">Fork a response at any point</h4>
<pre><code># Message 2: John eats apples, continuing the thread
forked_second_response = client.responses.create(
    model=&quot;gpt-4o-mini&quot;,
    previous_response_id=first_response.id,
    input=[
        {
            &quot;role&quot;: &quot;user&quot;,
            &quot;content&quot;: &quot;Then he eats 1 apple. How many does he have left?&quot;,
        }
    ],
)
print(&quot;Response 2:&quot;, forked_second_response.output_text)
</code></pre>
<pre><code>Response 2: If John eats 1 apple, he will have:

8 - 1 = 7 apples left.

So, John has 7 apples now.
</code></pre>
<blockquote>
<p>Info: Even when using previous_response_id, all previous input tokens for responses in the chain are billed as input tokens in the API.</p>
</blockquote>
<pre><code>first_response.usage
</code></pre>
<blockquote>
<p>ResponseUsage(input_tokens=35, input_tokens_details=InputTokensDetails(cached_tokens=0), output_tokens=68, output_tokens_details=OutputTokensDetails(reasoning_tokens=0), total_tokens=103)</p>
</blockquote>
<pre><code>second_response.usage
</code></pre>
<blockquote>
<p>ResponseUsage(input_tokens=124, input_tokens_details=InputTokensDetails(cached_tokens=0), output_tokens=36, output_tokens_details=OutputTokensDetails(reasoning_tokens=0), total_tokens=160)</p>
</blockquote>
<pre><code>third_response.usage
</code></pre>
<blockquote>
<p>ResponseUsage(input_tokens=184, input_tokens_details=InputTokensDetails(cached_tokens=0), output_tokens=88, output_tokens_details=OutputTokensDetails(reasoning_tokens=0), total_tokens=272)</p>
</blockquote>
<pre><code>client.responses.delete(first_response.id)
</code></pre>
<pre><code># Message 3: John gives half to Emma

third_response = client.responses.create(
    model=&quot;gpt-4o-mini&quot;,
    previous_response_id=second_response.id,
    input=[
        {
            &quot;role&quot;: &quot;user&quot;,
            &quot;content&quot;: &quot;He gives half of them to Emma. How many apples does each person have now?&quot;,
        }
    ],
)
print(&quot;Response 3:&quot;, third_response.output_text)
</code></pre>
<pre><code>Response 3: If John has 6 apples and he gives half to Emma, he gives away:

6 Ã· 2 = 3 apples.

Now, John has:

6 - 3 = 3 apples.

So, after the transaction:

- John has 3 apples.
- Emma has 3 apples.

Each person has 3 apples.
</code></pre>
<pre><code>third_response.usage
</code></pre>
<blockquote>
<p>ResponseUsage(input_tokens=81, input_tokens_details=InputTokensDetails(cached_tokens=0), output_tokens=69, output_tokens_details=OutputTokensDetails(reasoning_tokens=0), total_tokens=150)</p>
</blockquote>
<h3 id="openai-api-ollama">äºŒã€ä¸ºä»€ä¹ˆè¿™æ®µä»£ç ã€Œåœ¨ OpenAI å®˜æ–¹ API èƒ½å·¥ä½œï¼Œä½†åœ¨ Ollama ä¸€å®šä¸è¡Œã€</h3>
<p>âœ… åœ¨ OpenAI Responses API ä¸­</p>
<ul>
<li>previous_response_id</li>
<li>å†…éƒ¨ state</li>
<li>tool calls</li>
<li>MCP</li>
</ul>
<p>ğŸ‘‰ è¿™äº›æ˜¯â€œæœåŠ¡ç«¯èƒ½åŠ›â€</p>
<p>âŒ åœ¨ Ollama + æœ¬åœ°æ¨¡å‹ä¸­</p>
<ul>
<li>æ²¡æœ‰ session</li>
<li>æ²¡æœ‰ server-side memory</li>
<li>æ²¡æœ‰ response graph</li>
<li>æ²¡æœ‰ response_id é“¾æ¥æœºåˆ¶</li>
</ul>
<p>ğŸ‘‰ æ‰€æœ‰ä¸Šä¸‹æ–‡ï¼Œå¿…é¡»ä½ è‡ªå·±ä¼ </p>
<p>ä¸€å¥è¯æ€»ç»“ï¼š</p>
<p><strong>Responses API çš„â€œå¯¹è¯è¿ç»­æ€§â€ä¸æ˜¯åè®®ç‰¹æ€§ï¼Œè€Œæ˜¯ OpenAI æœåŠ¡å®ç°</strong></p>
<pre><code>history = []

def ask(user_input):
    history.append({&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: user_input})

    response = client.responses.create(
        model=&quot;qwen2.5:7b&quot;,
        input=history,
    )

    history.append({
        &quot;role&quot;: &quot;assistant&quot;,
        &quot;content&quot;: response.output_text
    })

    return response.output_text
</code></pre>
<pre><code>ask(&quot;John has 5 apples. Emma has 10. Emma gives him 3 apples.&quot;)
ask(&quot;Then John eats 2 apples. How many does he have left?&quot;)
ask(&quot;John gives half of them to Emma. How many apples does each person have now?&quot;)
</code></pre>
<p>ğŸ‘‰ ç°åœ¨æ¨¡å‹çœŸçš„â€œè®°ä½â€äº†</p>
<pre><code>&quot;Sure, let's go through the steps:\n\n1. 

After receiving 3 apples from Emma and eating 2, John has 8 - 2 = 6 apples.\n2. 

John then gives half of his 6 apples to Emma.\n\n

Half of 6 apples is:\n\\[ \\frac{6}{2} = 3 \\text{ apples} \\]\n\n

So, John gives 3 apples to Emma. Now let's update the number of apples each person has:\n\n- John initially had 6 apples and gave away 3, so he now has:\n  \\[ 6 - 3 = 3 \\text{ apples} \\]\n- Emma originally had 10 apples, received 3 from John, and did not eat any, 

so she now has:\n  \\[ 10 + 3 = 13 \\text{ apples} \\]\n\nTherefore, after the exchange, John has 3 apples and Emma has 13 apples.&quot;
</code></pre>
<h2 id="integrating-tools-web-functions-code">Integrating Tools: Web, Functions, Code</h2>
<p><strong>Available Tools</strong></p>
<ul>
<li>Function calling</li>
<li>Web search</li>
<li>File search</li>
<li>Image generation</li>
<li>Code interpreter</li>
<li>Computer use</li>
</ul>
<h3 id="responses-api">ä»æ–‡æœ¬åˆ°è¡ŒåŠ¨ï¼šResponses API å·¥å…·èƒ½åŠ›å…¨è§£æ</h3>
<p>éšç€å¤§æ¨¡å‹é€æ¸ä»â€œå¯¹è¯åŠ©æ‰‹â€æ¼”è¿›ä¸ºâ€œæ‰§è¡Œå‹æ™ºèƒ½ä½“ï¼ˆAgentï¼‰â€ï¼Œä»…å…·å¤‡æ–‡æœ¬ç”Ÿæˆèƒ½åŠ›å·²ç»è¿œè¿œä¸å¤Ÿã€‚OpenAI æ¨å‡ºçš„ <strong>Responses API</strong> æ­£æ˜¯å›´ç»•è¿™ä¸€è¶‹åŠ¿ï¼Œå°†å¤šç§å…³é”®å·¥å…·èƒ½åŠ›æ•´åˆè¿›ç»Ÿä¸€æ¥å£ï¼Œä½¿æ¨¡å‹èƒ½å¤Ÿåœ¨åˆé€‚çš„æ—¶æœºä¸»åŠ¨è°ƒç”¨å¤–éƒ¨èƒ½åŠ›ï¼Œå®ŒæˆçœŸå®ä¸–ç•Œä¸­çš„å¤æ‚ä»»åŠ¡ã€‚</p>
<h3 id="responses-api_1">å·¥å…·å³èƒ½åŠ›ï¼šResponses API çš„æ ¸å¿ƒè®¾è®¡ç†å¿µ</h3>
<p>åœ¨ Responses API ä¸­ï¼Œâ€œå·¥å…·ï¼ˆToolsï¼‰â€å¹¶éé™„åŠ åŠŸèƒ½ï¼Œè€Œæ˜¯æ¨¡å‹æ¨ç†æµç¨‹ä¸­çš„ä¸€ç­‰å…¬æ°‘ã€‚å®ƒä»¬åŒ…æ‹¬å‡½æ•°è°ƒç”¨ã€ç½‘é¡µæœç´¢ã€æ–‡ä»¶ä¸å›¾åƒå¤„ç†ã€ä»£ç è§£é‡Šå™¨ä»¥åŠè®¡ç®—æœºæ“ä½œèƒ½åŠ›ï¼Œå…±åŒæ„æˆäº†ç°ä»£ AI Agent çš„æ‰§è¡Œå±‚ã€‚è¿™ç§è®¾è®¡ä½¿æ¨¡å‹ä¸å†åªæ˜¯ç”Ÿæˆç­”æ¡ˆï¼Œè€Œæ˜¯èƒ½å¤Ÿ<strong>æ„ŸçŸ¥éœ€æ±‚ã€è§„åˆ’æ­¥éª¤å¹¶æ‰§è¡ŒåŠ¨ä½œ</strong>ã€‚</p>
<h3 id="_6">å‡½æ•°è°ƒç”¨ï¼šè¿æ¥æ¨¡å‹ä¸çœŸå®ç³»ç»Ÿçš„æ¡¥æ¢</h3>
<p>å‡½æ•°è°ƒç”¨ï¼ˆFunction Callingï¼‰æ˜¯æ„å»ºè‡ªåŠ¨åŒ–ç³»ç»Ÿå’Œ Agent å·¥ä½œæµçš„åŸºç¡€èƒ½åŠ›ã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡æ¸…æ™°ã€ä¸¥æ ¼çš„å‡½æ•°æè¿°å’Œå‚æ•°å®šä¹‰ï¼Œè®©æ¨¡å‹åœ¨è‡ªç„¶è¯­è¨€è¾“å…¥ä¸‹è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒç”¨å‡½æ•°ï¼Œå¹¶ç”Ÿæˆç»“æ„åŒ–çš„è°ƒç”¨å‚æ•°ã€‚è¿™ä¸€æœºåˆ¶ä½¿æ¨¡å‹èƒ½å¤Ÿå®‰å…¨ã€å¯æ§åœ°è®¿é—®å¤–éƒ¨ API æˆ–ä¸šåŠ¡ç³»ç»Ÿï¼Œè€Œä¸ä¾èµ–è„†å¼±çš„æ–‡æœ¬è§£æé€»è¾‘ã€‚</p>
<h3 id="_7">ç½‘é¡µæœç´¢ï¼šè·å–å®æ—¶ä¿¡æ¯ï¼Œä½†éœ€è¦æˆæœ¬æ„è¯†</h3>
<p>Responses API å†…ç½®çš„ç½‘é¡µæœç´¢å·¥å…·ä¸ºæ¨¡å‹æä¾›äº†å®æ—¶ä¿¡æ¯è·å–èƒ½åŠ›ï¼Œé€‚ç”¨äºæ–°é—»æ‘˜è¦ã€æœ¬åœ°æ¨èç­‰åœºæ™¯ã€‚ä½†å®è·µä¸­éœ€è¦æ³¨æ„ï¼Œæœç´¢æ·±åº¦å’Œä¸Šä¸‹æ–‡è§„æ¨¡ä¼šæ˜¾è‘—å½±å“å“åº”æ—¶é—´ä¸æˆæœ¬ã€‚é€šè¿‡åˆç†æ§åˆ¶ context sizeï¼Œå¯ä»¥åœ¨ä¿¡æ¯è´¨é‡ã€å»¶è¿Ÿå’Œè´¹ç”¨ä¹‹é—´å–å¾—æ›´ä¼˜å¹³è¡¡ï¼Œè¿™ä¹Ÿæ˜¯å·¥ç¨‹åŒ–è½åœ°æ—¶ä¸å¯å¿½è§†çš„ä¸€ç¯ã€‚</p>
<h3 id="_8">å›¾åƒç”Ÿæˆä¸å¤šè½®ç¼–è¾‘ï¼šä»ä¸€æ¬¡ç”Ÿæˆåˆ°æŒç»­åˆ›ä½œ</h3>
<p>åœ¨å›¾åƒç”Ÿæˆæ–¹é¢ï¼ŒResponses API ä¸ä»…æ”¯æŒé«˜è´¨é‡çš„æ–‡æœ¬ç”Ÿæˆå›¾åƒï¼Œè¿˜æ”¯æŒåŸºäºå†å²å“åº”æˆ–å›¾åƒ ID çš„å¤šè½®ç¼–è¾‘ã€‚è¿™ç§â€œå¯è¿½æº¯ã€å¯è¿­ä»£â€çš„è®¾è®¡ï¼Œä½¿å›¾åƒç”Ÿæˆæ›´æ¥è¿‘çœŸå®åˆ›ä½œæµç¨‹ï¼Œé€‚ç”¨äºè®¾è®¡è¿­ä»£ã€åˆ›æ„ç”Ÿæˆå’Œäº§å“åŸå‹ç­‰åœºæ™¯ã€‚</p>
<h3 id="code-interpreter">Code Interpreterï¼šè®©æ¨¡å‹â€œä¼šç®—ã€èƒ½è·‘ã€å¯è§£é‡Šâ€</h3>
<p>ä»£ç è§£é‡Šå™¨ï¼ˆPython Toolï¼‰ä¸ºæ¨¡å‹æä¾›äº†â€œå†™ä»£ç  + æ‰§è¡Œä»£ç  + è§£é‡Šç»“æœâ€çš„é—­ç¯èƒ½åŠ›ã€‚ç›¸è¾ƒäºç›´æ¥ç»™å‡ºç»“è®ºï¼Œè¿™ç§æ–¹å¼æ˜¾è‘—æå‡äº†ç»“æœçš„å¯é æ€§å’Œå¯è§£é‡Šæ€§ï¼Œå°¤å…¶é€‚åˆæ•°å­¦æ¨å¯¼ã€æ•°æ®åˆ†æå’Œå·¥ç¨‹è®¡ç®—ç­‰å¯¹å‡†ç¡®æ€§è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ã€‚</p>
<h3 id="code-toolsipynb">Code  - tools.ipynb</h3>
<pre><code>import json
from openai import OpenAI

with open(&quot;../config.json&quot;) as f:
    config = json.load(f)

# Access API key
api_key = config[&quot;openai_api_key&quot;]

client = OpenAI(
     base_url=&quot;https://openrouter.ai/api/v1&quot;,
     api_key=api_key
    )
</code></pre>
<h4 id="function-calling">Function Calling</h4>
<pre><code>import requests


def get_weather(latitude, longitude):
    response = requests.get(
        f&quot;https://api.open-meteo.com/v1/forecast?latitude={latitude}&amp;longitude={longitude}&amp;current=temperature_2m,wind_speed_10m&amp;hourly=temperature_2m,relative_humidity_2m,wind_speed_10m&quot;
    )
    data = response.json()
    return data[&quot;current&quot;][&quot;temperature_2m&quot;]
</code></pre>
<pre><code> tools = [
    {
        &quot;type&quot;: &quot;function&quot;,
        &quot;name&quot;: &quot;get_weather&quot;,
        &quot;description&quot;: &quot;Get current temperature for provided coordinates in celsius.&quot;,
        &quot;parameters&quot;: {
            &quot;type&quot;: &quot;object&quot;,
            &quot;properties&quot;: {
                &quot;latitude&quot;: {&quot;type&quot;: &quot;number&quot;},
                &quot;longitude&quot;: {&quot;type&quot;: &quot;number&quot;},
            },
            &quot;required&quot;: [&quot;latitude&quot;, &quot;longitude&quot;],
            &quot;additionalProperties&quot;: False,
        },
        &quot;strict&quot;: True,
    }
]

input_messages = [
    {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;What's the weather like in Paris today?&quot;}
]

response = client.responses.create(
    model=&quot;arcee-ai/trinity-mini:free&quot;,
    input=input_messages,
    tools=tools,
</code></pre>
<pre><code>for r in response.output:
    print(&quot;Function call:&quot;, r.name)
    print(&quot;Arguments:&quot;, r.arguments)
    print(&quot;Status:&quot;, r.status)
</code></pre>
<pre><code>Function call: get_weather
Arguments: {&quot;latitude&quot;:48.8566,&quot;longitude&quot;:2.3522}
Status: completed
</code></pre>
<pre><code>import json

if r.name == &quot;get_weather&quot;:
    args = json.loads(r.arguments)  # parse string â†’ dict
    latitude = args[&quot;latitude&quot;]
    longitude = args[&quot;longitude&quot;]
    temperature = get_weather(latitude, longitude)
    print(f&quot;The current temperature in Paris is {temperature}Â°C.&quot;)
</code></pre>
<blockquote>
<p>The current temperature in Paris is 11.3Â°C.</p>
</blockquote>
<h4 id="web-search">Web search</h4>
<pre><code>response = client.responses.create(
    model=&quot;openai/gpt-oss-20b:free&quot;,
    tools=[{&quot;type&quot;: &quot;web_search_preview&quot;}],
    input=&quot;What is the biggest tech news today in one sentence?&quot;,
)

print(response.output_text)
</code></pre>
<blockquote>
<p>IBM has agreed to buy dataâ€‘streaming platform Confluent for $11â€¯billion in cash, a move that will bolster its AI and dataâ€‘automation portfolio and make it the largest acquisition in the companyâ€™s recent historyâ€¯<a href="https://techcrunch.com/2025/12/08/ibm-to-acquire-confluent-for-11b-as-it-seeks-to-bolster-its-data-offerings/">techcrunch.com</a><a href="https://www.prnewswire.com/news-releases/ibm-to-acquire-confluent-to-create-smart-data-platform-for-enterprise-generative-ai-302635317.html">prnewswire.com</a>.</p>
</blockquote>
<pre><code>print(response.output)
</code></pre>
<pre><code> [ResponseReasoningItem(id='rs_tmp_sx0e1tf4cd', summary=[], type='reasoning', content=[Content(text='We need to answer: &quot;What is the biggest tech news today in one sentence?&quot; We have to incorporate web search results. The search results include Reuters article about global tech shares surge due to Nvidia\'s AI boom, IBM acquiring Confluent for $11B, Google antitrust remedies, etc. The question: &quot;What is the biggest tech news today in one sentence?&quot; We need to pick the biggest news. Likely the IBM acquisition of Confluent is big. Or the Google antitrust remedies. Which is bigger? IBM acquiring Confluent for $11B is a major deal. Google antitrust remedies also significant. But the question: &quot;today&quot; refers to the date of the search: 2025-12-16. The IBM acquisition was announced Dec 8, 2025. Google antitrust remedies finalized Dec 5, 2025. Which is bigger? IBM acquisition is a big $11B deal. Google antitrust is also huge. But the question: &quot;biggest tech news today&quot; likely refers to the most significant headline. The Reuters article about global tech shares surge due to Nvidia\'s AI boom is also big. But the IBM acquisition is a major corporate event. Let\'s choose IBM acquiring Confluent for $11B. Provide one sentence summarizing. Cite sources: TechCrunch article and PRNewswire. Use markdown links named by domain: techcrunch.com, prnewswire.com. Also maybe mention Reuters? But we can cite TechCrunch and PRNewswire. Provide one sentence: &quot;IBM has agreed to acquire dataâ€‘streaming platform Confluent for $11\u202fbillion in cash, positioning the tech giant to strengthen its AI and data offerings.&quot; Cite.', type='reasoning_text')], encrypted_content=None, status=None), ResponseOutputMessage(id='msg_tmp_xexiao43uc', content=[ResponseOutputText(annotations=[AnnotationURLCitation(end_index=0, start_index=0, title=&quot;Today's Latest Technology News | Reuters&quot;, type='url_citation', url='https://www.reuters.com/technology/'), AnnotationURLCitation(end_index=0, start_index=0, title='IBM to acquire Confluent for $11B as it seeks to bolster its data offerings', type='url_citation', url='https://techcrunch.com/2025/12/08/ibm-to-acquire-confluent-for-11b-as-it-seeks-to-bolster-its-data-offerings/'), AnnotationURLCitation(end_index=0, start_index=0, title='IBM to Acquire Confluent to Create Smart Data Platform for Enterprise Generative AI', type='url_citation', url='https://www.prnewswire.com/news-releases/ibm-to-acquire-confluent-to-create-smart-data-platform-for-enterprise-generative-ai-302635317.html'), AnnotationURLCitation(end_index=0, start_index=0, title='Judge finalizes remedies in Google antitrust case', type='url_citation', url='https://www.cnbc.com/2025/12/05/judge-finalize-remedies-in-google-antitrust-case.html'), AnnotationURLCitation(end_index=0, start_index=0, title='Tech - CNBC', type='url_citation', url='https://www.cnbc.com/technology/')], text='IBM has agreed to buy dataâ€‘streaming platform Confluent for $11\u202fbillion in cash, a move that will bolster its AI and dataâ€‘automation portfolio and make it the largest acquisition in the companyâ€™s recent history\u202f[techcrunch.com](https://techcrunch.com/2025/12/08/ibm-to-acquire-confluent-for-11b-as-it-seeks-to-bolster-its-data-offerings/)[prnewswire.com](https://www.prnewswire.com/news-releases/ibm-to-acquire-confluent-to-create-smart-data-platform-for-enterprise-generative-ai-302635317.html).', type='output_text', logprobs=None)], role='assistant', status='completed', type='message')]
</code></pre>
<pre><code>## User location based search

response = client.responses.create(
    model=&quot;openai/gpt-oss-120b:free&quot;,
    tools=[
        {
            &quot;type&quot;: &quot;web_search_preview&quot;,
            &quot;user_location&quot;: {
                &quot;type&quot;: &quot;approximate&quot;,
                &quot;country&quot;: &quot;GB&quot;,
                &quot;city&quot;: &quot;London&quot;,
                &quot;region&quot;: &quot;London&quot;,
            },
        }
    ],
    input=&quot;What are the best restaurants around Wimbledon?&quot;,
)

print(response.output_text)
</code></pre>
<pre><code>Below is a quickâ€‘reference guide to the restaurants that consistently rank highest (by diners, critics and booking data) in and around Wimbledon.  Iâ€™ve grouped them by the type of experience you might be after â€“â€¯fineâ€‘dining, casualâ€‘bistro, familyâ€‘friendly, ethnic specialties, and â€œmustâ€‘tryâ€ hidden gems â€“â€¯and added the key details that most visitors care about (cuisine, price band, OpenTable rating or Infatuation score, and a oneâ€‘sentence why itâ€™s worth a reservation).

---

## 1.  Fineâ€‘Dining / â€œSpecialâ€‘Occasionâ€ Picks  

| Restaurant | Cuisine | Price* | Rating (OpenTable / Infatuation) | Why it stands out |
|------------|---------|--------|----------------------------------|-------------------|
| **Buenosâ€¯Aires Argentine Steakhouse** â€“ Wimbledon | Argentinian grill | Â£Â£Â£Â£ (expensive) | 4.8â€¯/â€¯4.8â€¯â­ (OT) | Championâ€‘grade charâ€‘grilled steaks; highlighted as OpenTableâ€™s â€œDinersâ€™ top pickâ€ for its quality and governmentâ€‘backed Argentine flagship statusã€opentable.comã€‘ | 
| **Efesâ€¯Premium** â€“ Wimbledon | Turkish / Mediterranean | Â£Â£Â£Â£ (expensive) | 4.7â€¯/â€¯4.7â€¯â­ (OT) | Upscale Turkish tasting menu with a modern dÃ©cor; praised for fresh ingredients and a romantic vibeã€opentable.comã€‘ | 
| **The Fox and Grapes** â€“ Wimbledon | Modern British gastroâ€‘pub | Â£Â£Â£ (moderate) | 4.5â€¯/â€¯4.5â€¯â­ (OT) | Bibâ€¯Gourmandâ€‘awarded, seasonal British dishes and a Josperâ€‘oven steak; a favourite of tennis fans and locals alikeã€opentable.comã€‘ | 
| **The Rushmere** (formerly The Swan) â€“ Wimbledon | Gastroâ€‘pub, liveâ€‘sport TV | Â£Â£Â£Â£ (expensive) | 4.4â€¯/â€¯4.5â€¯â­ (OT) | Large screens for sport, hearty British fare and a lively bar atmosphereã€opentable.comã€‘ | 
| **Takahashi** â€“ South Wimbledon | Omakaseâ€‘style Japanese (12â€‘seat) | Â£Â£Â£Â£ (expensive) | 4.8â€¯/â€¯4.7â€¯â­ (Infatuation) | Intimate, chefâ€‘directed tasting menu that feels private without the ultraâ€‘price tag of centralâ€‘London omakase spotsã€theinfatuation.comã€‘ | 
| **Alâ€¯Forno** â€“ Wimbledon | Italian (brickâ€‘oven pizza &amp; pasta) | Â£Â£Â£Â£ (expensive) | 4.7â€¯/â€¯4.7â€¯â­ (Infatuation) | Rustic brickâ€‘oven pizzas, solid pastas and a standout banoffee; great for groups who want a relaxed yet polished dinnerã€theinfatuation.comã€‘ | 
| **Grilandia â€“ Wimbledon** | Lebanese / Mediterranean | Â£Â£Â£ (moderate) | 4.7â€¯/â€¯4.7â€¯â­ (OT) | Allâ€‘day brasserie with modern Lebanese mezze, a bright interior and a solid 4.7 rating on OpenTableã€opentable.comã€‘ | 

\*Price bands are the OpenTable symbols:â€¯Â£â€¯=â€¯budget,â€¯Â£Â£â€¯=â€¯moderate,â€¯Â£Â£Â£â€¯=â€¯expensive,â€¯Â£Â£Â£Â£â€¯=â€¯veryâ€¯expensive.

---

## 2.  Casualâ€‘Bistro / Lunchâ€‘Andâ€‘Brunch Favorites  

| Restaurant | Cuisine | Price | Rating | Highlights |
|------------|---------|-------|--------|------------|
| **The Black Lamb** â€“ Wimbledon Village | Modern British, farmâ€‘toâ€‘fork | Â£Â£Â£ (expensive) | 4.6â€¯â­ (Map&amp;Family) | Seasonal British set menus, a 5â€‘course Wimbledonâ€‘fortnight menu, and an onâ€‘site English wine listã€mapandfamily.comã€‘ |
| **Light House** â€“ Wimbledon Village | Contemporary European | Â£Â£ (moderate) | 4.5â€¯â­ (Map&amp;Family) | Rotating seasonal dishes, liveâ€‘jazz evenings, and a relaxed garden terraceã€mapandfamily.comã€‘ |
| **Light on the Common** â€“ Wimbledon | Europeanâ€‘style cafÃ© | Â£Â£ (moderate) | 4.4â€¯â­ (Map&amp;Family) | Breakfast smoothies, marketâ€‘fish stew, and a sunny conservatory for brunchã€mapandfamily.comã€‘ |
| **The Ivy CafÃ© Wimbledon** | Contemporary British | Â£Â£Â£Â£ (expensive) | 4.3â€¯â­ (OT) | Allâ€‘day menu, stylish interior, and a popular spot for families and business lunchesã€opentable.comã€‘ |
| **Patara Fine Thai** â€“ Wimbledon | Thai (modern) | Â£Â£Â£ (moderate) | 4.8â€¯â­ (Infatuation) | Outdoor garden terrace, standout green curry, and a menu that balances authentic Thai with a British twistã€theinfatuation.comã€‘ |
| **Thaiâ€¯Tho â€“ Wimbledon** | Thai (classic) | Â£Â£Â£ (moderate) | 4.7â€¯â­ (OT) | Familyâ€‘run, tennisâ€‘player favourite, generous portions of tomâ€¯yum and curriesã€opentable.comã€‘ |
| **Meganâ€™s in the Village** | Mediterraneanâ€‘inspired (Britishâ€‘Mediterranean) | Â£Â£ (moderate) | 4.5â€¯â­ (Map&amp;Family) | Light, airy patio, brunch cocktails, and dogâ€‘friendly outdoor seatingã€mapandfamily.comã€‘ |
| **Centâ€¯Anni** â€“ Wimbledon Village | Italian | Â£Â£ (moderate) | 4.8â€¯â­ (Map&amp;Family) | Handmade pasta, â€œPizza Mondayâ€ and â€œPasta Tuesdayâ€ specials, plus a kidsâ€™ menuã€mapandfamily.comã€‘ |

---

## 3.  Ethnic &amp; Specialty Restaurants  

| Restaurant | Cuisine | Price | Rating | What makes it a â€œmustâ€‘tryâ€ |
|------------|---------|-------|--------|----------------------------|
| **Sticksâ€™nâ€™Sushi â€“ Wimbledon** | Japanese sushi &amp; grilled sticks | Â£Â£Â£Â£ (expensive) | 4.6â€¯â­ (OT) / 4.9â€¯â­ (Infatuation) | Consistently excellent maki, creative toppings (e.g., tunaâ€‘BBQ sauce) and a sleek interior for date nightsã€theinfatuation.comã€‘ |
| **Bombayâ€¯Delight** â€“ Wimbledon | Indian (regional) | Â£Â£Â£ (moderate) | 4.7â€¯â­ (OT) / 4.7â€¯â­ (Infatuation) | Chefâ€‘driven menu with lesserâ€‘known regional dishes, no artificial colours, and a bright, celebratory vibeã€opentable.comã€‘ã€theinfatuation.comã€‘ |
| **Gigglingâ€¯Squid â€“ Wimbledon** | Thai â€œtapasâ€ | Â£Â£ (moderate) | 4.5â€¯â­ (TripAdvisor) | Smallâ€‘plate Thai streetâ€‘food style, vibrant dÃ©cor, and a popular spot for sharing with friendsã€tripadvisor.co.ukã€‘ |
| **Maisonâ€¯Stâ€¯Cassien** â€“ Wimbledon Village | Lebanese / Mediterranean | Â£Â£ (moderate) | 4.5â€¯â­ (Map&amp;Family) | Authentic Lebanese mezze, full English breakfast, and a sunny courtyard that opens at 7â€¯amã€mapandfamily.comã€‘ |
| **Chango Empanadas** â€“ Wimbledon High St | Argentine (empanadas) | Â£Â£ (moderate) | 4.4â€¯â­ (Map&amp;Family) | Handâ€‘rolled empanadas with creative fillings (pumpkinâ€‘goat cheese, spicy chicken) and a small wine list; perfect for a quick biteã€mapandfamily.comã€‘ |
| **Good Fortune Club** â€“ Wimbledon | Dim sum / Chinese | Â£Â£ (moderate) | 4.3â€¯â­ (Map&amp;Family) | Newer dimâ€‘sum concept with a concise menu, good for a casual lunch or takeâ€‘awayã€mapandfamily.comã€‘ |
| **Rajdoot Tandoori** â€“ Wimbledon Village | Indian (classic) | Â£Â£ (moderate) | 4.2â€¯â­ (Map&amp;Family) | Familyâ€‘run since 1982, reliable curries and a solid dinnerâ€‘time menuã€mapandfamily.comã€‘ |
| **Villageâ€¯Tandoori** â€“ Wimbledon | Indian (modern) | Â£Â£ (moderate) | 4.2â€¯â­ (Map&amp;Family) | Recently refurbished, extensive menu, and a good option for lateâ€‘evening mealsã€mapandfamily.comã€‘ |

---

## 4.  Familyâ€‘Friendly / Pubâ€‘Style Options  

| Restaurant | Cuisine | Price | Rating | Why families love it |
|------------|---------|-------|--------|----------------------|
| **The Hand in Hand** â€“ Wimbledon Common | British pub | Â£Â£ (moderate) | 4.5â€¯â­ (Map&amp;Family) | Classic Sunday roast, realâ€‘ale masterclasses, fireâ€‘place and outdoor garden â€“ great for kids and groupsã€mapandfamily.comã€‘ |
| **The Fox and Grapes** â€“ Wimbledon (also listed above) | British gastroâ€‘pub | Â£Â£Â£ (moderate) | 4.5â€¯â­ (OT) | Spacious patio, kidâ€‘friendly menu, and a relaxed vibe after a day at the courtsã€opentable.comã€‘ |
| **Billâ€™s Restaurant &amp; Bar â€“ Wimbledon** | British (comfort) | Â£Â£ (moderate) | 4.4â€¯â­ (OT) | Large menu covering breakfast to dinner, vegetarian/vegan options, and a terrace for sunny daysã€opentable.comã€‘ |
| **The Alexandra** â€“ Wimbledon Hill Rd | British pub | Â£Â£ (moderate) | 4.4â€¯â­ (TripAdvisor) | Friendly service, solid pub classics, and a convenient location near the stationã€tripadvisor.co.ukã€‘ |
| **CÃ´te Brasserie â€“ Wimbledon** | French brasserie | Â£Â£Â£ (moderate) | 4.2â€¯â­ (OT) | Consistent French classics (steakâ€‘frites, croqueâ€‘monsieur) and a kidsâ€™ menu; good for a relaxed family dinnerã€opentable.comã€‘ |

---

## 5.  Quickâ€‘Bite / CafÃ© Picks (Great for a coffee break or light lunch)

| Spot | What they serve | Rating |
|------|----------------|--------|
| **Saucer &amp; Cup** â€“ Wimbledon Park | Specialty coffee, pastries, light bites | 4.5â€¯â­ (TripAdvisor) |
| **Cakes by Robin** â€“ Wimbledon Stadium Business Park | Artisan cakes, coffee, glutenâ€‘free options | 4.5â€¯â­ (TripAdvisor) |
| **All Bar One â€“ Wimbledon** | International cafÃ©â€‘style menu, brunch plates | 4.3â€¯â­ (TripAdvisor) |
| **Francoâ€¯Manca â€“ Southfields** (near Wimbledon) | Sourdough pizza, simple salads | 4.2â€¯â­ (TripAdvisor) |
| **Meganâ€™s in the Village** (also listed above) | Light Mediterranean plates, brunch cocktails | 4.5â€¯â­ (Map&amp;Family) |

---

## 6.  How to Choose &amp; Book  

1. **For a special night out** â€“ go for **Buenosâ€¯Aires**, **Efesâ€¯Premium**, **Takahashi**, or **Alâ€¯Forno**.  
2. **For a relaxed lunch or brunch** â€“ try **The Black Lamb**, **Light House**, **Patara**, **Meganâ€™s**, or **Centâ€¯Anni**.  
3. **If youâ€™re after Asian flavors** â€“ **Sticksâ€™nâ€™Sushi**, **Gigglingâ€¯Squid**, **Bombayâ€¯Delight**, or **Thaiâ€¯Tho**.  
4. **Family or group meals** â€“ **The Hand in Hand**, **The Fox and Grapes**, **Billâ€™s**, or **CÃ´te Brasserie**.  
5. **Quick coffee or snack** â€“ **Saucer &amp; Cup**, **Cakes by Robin**, or **All Bar One**.

All of the restaurants above are available for reservation on **OpenTable** (just search â€œWimbledonâ€ on the platform) and most have realâ€‘time availability, especially during the Wimbledon fortnight when bookings fill up fast.  

---

### Bottom Line

Wimbledonâ€™s dining scene is surprisingly diverse: you can enjoy worldâ€‘class Argentine steak, refined Japanese omakase, hearty British pub classics, vibrant Thai streetâ€‘food, and cozy Mediterranean mezze all within a 10â€‘minute walk of the tennis grounds.  Pick the vibe you want, check the price band, and book early (especially for the highâ€‘rated spots) â€“ youâ€™ll be set for a memorable meal whether youâ€™re celebrating a victory on Centre Court or just exploring the villageâ€™s charming streets.  



*All ratings are current as of the latest data (Mayâ€¯2025). Prices are shown in OpenTableâ€™s â€œÂ£â€ symbols; â€œÂ£Â£â€ = moderate, â€œÂ£Â£Â£â€ = expensive, â€œÂ£Â£Â£Â£â€ = very expensive.*
</code></pre>
<pre><code>response.usage

ResponseUsage(input_tokens=52805, input_tokens_details=InputTokensDetails(cached_tokens=0), output_tokens=3083, output_tokens_details=OutputTokensDetails(reasoning_tokens=296), total_tokens=55888, cost=0.02, is_byok=False, cost_details={'upstream_inference_cost': None, 'upstream_inference_input_cost': 0, 'upstream_inference_output_cost': 0})
</code></pre>
<pre><code># You can also adjust context size: low, medium, high

response = client.responses.create(
    model=&quot;openai/gpt-oss-120b:free&quot;,
    tools=[
        {
            &quot;type&quot;: &quot;web_search_preview&quot;,
            &quot;search_context_size&quot;: &quot;low&quot;,
        }
    ],
    input=&quot;Who is the CEO of OpenAI?&quot;,
)

print(response.output_text)
</code></pre>
<blockquote>
<p>The chief executive officer of OpenAI is <strong>Samâ€¯Altman</strong>ã€openai.comã€‘. He has held the role since 2019 and continues to lead the companyâ€™s AI research and product development effortsã€britannica.comã€‘.</p>
</blockquote>
<pre><code>response.usage

ResponseUsage(input_tokens=46680, input_tokens_details=InputTokensDetails(cached_tokens=0), output_tokens=132, output_tokens_details=OutputTokensDetails(reasoning_tokens=77), total_tokens=46812, cost=0.02, is_byok=False, cost_details={'upstream_inference_cost': None, 'upstream_inference_input_cost': 0, 'upstream_inference_output_cost': 0})
</code></pre>
<h4 id="image-generation">Image Generation</h4>
<pre><code>import base64
import json
from openai import OpenAI

client = OpenAI(
    api_key=&quot;ollama&quot;,  # éšä¾¿å†™
    base_url=&quot;http://localhost:11434/v1&quot;
)

response = client.responses.create(
    model=&quot;qwen3-vl:4b&quot;,
    input=&quot;Generate an image of cute coding dog wearing headset and glasses&quot;,
    tools=[{&quot;type&quot;: &quot;image_generation&quot;}],
)

# Save the image to a file
image_data = [
    output.result
    for output in response.output
    if output.type == &quot;image_generation_call&quot;
]

if image_data:
    image_base64 = image_data[0]
    with open(&quot;coding_dog_new.png&quot;, &quot;wb&quot;) as f:
        f.write(base64.b64decode(image_base64))
</code></pre>
<h4 id="follow-up-image-instructions">Follow up image instructions</h4>
<pre><code> response_fwup = client.responses.create(
    model=&quot;gpt-4.1-mini&quot;,
    previous_response_id=response.id,
    input=&quot;Now make it wear sunglasses&quot;,
    tools=[{&quot;type&quot;: &quot;image_generation&quot;}],
)

image_data_fwup = [
    output.result
    for output in response_fwup.output
    if output.type == &quot;image_generation_call&quot;
]

if image_data_fwup:
    image_base64 = image_data_fwup[0]
    with open(&quot;coding_dog_sunglasses.png&quot;, &quot;wb&quot;) as f:
        f.write(base64.b64decode(image_base64))
</code></pre>
<h4 id="code-interpreter_1">Code Interpreter</h4>
<pre><code>instructions = &quot;&quot;&quot;
You are a personal math tutor. When asked a math question, 
write and run code using the python tool to answer the question.
&quot;&quot;&quot;  # Keep &quot;python tool&quot; phrase in your prompt to ensure the model invokes this tool.

resp = client.responses.create(
    model=&quot;kwaipilot/kat-coder-pro:free&quot;,
    tools=[{&quot;type&quot;: &quot;code_interpreter&quot;, &quot;container&quot;: {&quot;type&quot;: &quot;auto&quot;}}],
    instructions=instructions,
    input=&quot;I need to solve the equation 3x + 11 = 14. Can you help me?&quot;,
)

print(resp.output)
</code></pre>
<pre><code>[ResponseOutputMessage(id='msg_68776b41673481988ebba3edd1a6e939076deb4565eecd63', content=[ResponseOutputText(annotations=[], text=&quot;Sure! Let's solve the equation \\(3x + 11 = 14\\).\n\nI'll solve for \\(x\\).&quot;, type='output_text', logprobs=[])], role='assistant', status='completed', type='message'), ResponseCodeInterpreterToolCall(id='ci_68776b4201c48198ad9f17586ff86dcf076deb4565eecd63', code=&quot;from sympy import symbols, Eq, solve\n\n# Define the variable\nx = symbols('x')\n\n# Define the equation\nequation = Eq(3*x + 11, 14)\n\n# Solve the equation\nsolution = solve(equation, x)\nsolution&quot;, container_id='cntr_68776b40d8748198a9e7352d828f636b0682ffa7a6b3eb87', outputs=None, status='completed', type='code_interpreter_call'), ResponseOutputMessage(id='msg_68776b4646188198b1bb6f7853bc3586076deb4565eecd63', content=[ResponseOutputText(annotations=[], text='The solution to the equation \\(3x + 11 = 14\\) is \\(x = 1\\).', type='output_text', logprobs=[])], role='assistant', status='completed', type='message')]
</code></pre>
<pre><code>for item in resp.output:
    if item.type == &quot;code_interpreter_call&quot;:
        print(&quot;Code:\n&quot;, item.code, &quot;\n&quot;)
    elif item.type == &quot;message&quot;:
        for content_item in item.content:
            if content_item.type == &quot;output_text&quot;:
                print(&quot;Text:\n&quot;, content_item.text, &quot;\n&quot;)
</code></pre>
<pre><code>Text:
 Sure! Let's solve the equation \(3x + 11 = 14\).

I'll solve for \(x\). 

Code:
 from sympy import symbols, Eq, solve

# Define the variable
x = symbols('x')

# Define the equation
equation = Eq(3*x + 11, 14)

# Solve the equation
solution = solve(equation, x)
solution 

Text:
 The solution to the equation \(3x + 11 = 14\) is \(x = 1\).
</code></pre>
<h2 id="file-search">åŸºäº File Search çš„çŸ¥è¯†å‹æ™ºèƒ½åŠ©æ‰‹å®è·µ</h2>
<p>è¿‡å»ï¼Œæ„å»ºä¸€ä¸ªèƒ½å¤ŸåŸºäºç§æœ‰æ–‡ä»¶è¿›è¡Œé—®ç­”çš„æ™ºèƒ½åŠ©æ‰‹ï¼Œå¾€å¾€éœ€è¦å¼€å‘è€…è‡ªè¡Œå¤„ç†å‘é‡æ•°æ®åº“ã€è¯­ä¹‰æ£€ç´¢å’Œæ•°æ®å¬å›ç­‰å¤æ‚ç¯èŠ‚ï¼Œå·¥ç¨‹æˆæœ¬å’Œç»´æŠ¤æˆæœ¬éƒ½ç›¸å¯¹è¾ƒé«˜ã€‚è€Œå€ŸåŠ© <strong>OpenAI çš„ File Search å·¥å…·ä¸ Responses API</strong>ï¼Œè¿™ä¸€æµç¨‹è¢«æ˜¾è‘—ç®€åŒ–ï¼ŒçŸ¥è¯†å‹åŠ©æ‰‹çš„å¼€å‘é—¨æ§›å¤§å¹…é™ä½ã€‚</p>
<p>åœ¨å®è·µä¸­ï¼Œå¼€å‘æµç¨‹ä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªæ­¥éª¤ï¼šé¦–å…ˆï¼Œå°†ä¸šåŠ¡ç›¸å…³æ–‡æ¡£æŒ‰ç…§ OpenAI è§„èŒƒä¸Šä¼ ä¸ºæ–‡ä»¶èµ„æºï¼›å…¶æ¬¡ï¼Œåˆ›å»ºå‘é‡å­˜å‚¨ï¼ˆVector Storeï¼‰ï¼Œå¹¶å°†æ–‡ä»¶åŠ å…¥å…¶ä¸­ä»¥å®Œæˆè¯­ä¹‰å‘é‡åŒ–ï¼›æœ€åï¼Œåœ¨ Responses API ä¸­å¯ç”¨ <code>file_search</code> å·¥å…·ï¼ŒåŸºäºå‘é‡å­˜å‚¨å®ç°é«˜æ•ˆã€å‡†ç¡®çš„è¯­ä¹‰æ£€ç´¢ã€‚æ•´ä¸ªè¿‡ç¨‹æ— éœ€å¼€å‘è€…è‡ªè¡Œç»´æŠ¤å‘é‡æ•°æ®åº“æˆ–æœç´¢é€»è¾‘ï¼Œæå¤§æå‡äº†å¼€å‘æ•ˆç‡ã€‚</p>
<p>åŸºäºè¿™ä¸€èƒ½åŠ›ï¼Œå¯ä»¥å¿«é€Ÿæ„å»ºä¸€ä¸ªç»ˆç«¯æˆ– Web å½¢å¼çš„æ™ºèƒ½åŠ©æ‰‹ï¼Œç”¨äºå›ç­”ç”¨æˆ·å…³äºæ´»åŠ¨å®‰æ’ã€è§„åˆ™è¯´æ˜ç­‰é—®é¢˜ã€‚å®é™…æµ‹è¯•è¡¨æ˜ï¼Œè¯¥æ–¹æ¡ˆä¸ä»…å“åº”é€Ÿåº¦å¿«ï¼ˆé€šå¸¸åœ¨æ•°ç§’å†…å®Œæˆï¼‰ï¼Œè€Œä¸”é€šè¿‡é™åˆ¶æ£€ç´¢ç»“æœæ•°é‡ï¼Œæœ‰æ•ˆæ§åˆ¶äº† Token æ¶ˆè€—ï¼Œå…·å¤‡è‰¯å¥½çš„æˆæœ¬æ•ˆç‡ã€‚</p>
<blockquote>
<p>File Search å°†â€œçŸ¥è¯†æ³¨å…¥â€ä»å¤æ‚çš„å·¥ç¨‹é—®é¢˜ï¼Œè½¬åŒ–ä¸ºæ ‡å‡†åŒ–çš„ API èƒ½åŠ›ï¼Œæ˜¯æ„å»ºä¼ä¸šçº§çŸ¥è¯†é—®ç­”ä¸å†…éƒ¨æ™ºèƒ½åŠ©æ‰‹çš„å…³é”®åŸºç¡€è®¾æ–½ã€‚</p>
</blockquote>
<p><img alt="Alt Image Text" src="../../images/chap8_0_3.png" title="Body image" />  </p>
<p><strong><code>upload_file.ipynb</code></strong></p>
<pre><code>import json
from openai import OpenAI

with open(&quot;../config.json&quot;) as f:
    config = json.load(f)

# Access API key
api_key = config[&quot;openai_api_key&quot;]

client = OpenAI(api_key=api_key)
</code></pre>
<h4 id="create-the-file">Create the file</h4>
<pre><code>import requests
from io import BytesIO

def create_file(client, file_path):
    if file_path.startswith(&quot;http://&quot;) or file_path.startswith(&quot;https://&quot;):
        # Download the file content from the URL
        response = requests.get(file_path)
        file_content = BytesIO(response.content)
        file_name = file_path.split(&quot;/&quot;)[-1]
        file_tuple = (file_name, file_content)
        result = client.files.create(file=file_tuple, purpose=&quot;assistants&quot;)
    else:
        # Handle local file path
        with open(file_path, &quot;rb&quot;) as file_content:
            result = client.files.create(file=file_content, purpose=&quot;assistants&quot;)
    print(result.id)
    return result.id


# Replace with your own file path or URL
file_id = create_file(client, &quot;AI_Summit_Program.pdf&quot;)
</code></pre>
<h4 id="create-a-vector-store">Create a vector store</h4>
<pre><code>vector_store = client.vector_stores.create(name=&quot;knowledge_base&quot;)
print(vector_store.id)
</code></pre>
<h4 id="add-the-file-to-the-vector-store">Add the file to the vector store</h4>
<pre><code>client.vector_stores.files.create(vector_store_id=vector_store.id, file_id=file_id)
</code></pre>
<blockquote>
<p>VectorStoreFile(id='file-ABB2cqjqiMisJchkZfY48q', created_at=1752671502, last_error=None, object='vector_store.file', status='in_progress', usage_bytes=0, vector_store_id='vs_687782eca894819185cc116786181154', attributes={}, chunking_strategy=StaticFileChunkingStrategyObject(static=StaticFileChunkingStrategy(chunk_overlap_tokens=400, max_chunk_size_tokens=800), type='static'))</p>
</blockquote>
<h4 id="check-status">Check status</h4>
<pre><code>result = client.vector_stores.files.list(vector_store_id=vector_store.id)
print(result)
</code></pre>
<blockquote>
<p>SyncCursorPage<a href="data=[VectorStoreFile(id=" title="file-ABB2cqjqiMisJchkZfY48q', created_at=1752671502, last_error=None, object='vector_store.file', status='completed', usage_bytes=3091, vector_store_id='vs_687782eca894819185cc116786181154', attributes={}, chunking_strategy=StaticFileChunkingStrategyObject(static=StaticFileChunkingStrategy(chunk_overlap_tokens=400, max_chunk_size_tokens=800), type='static">VectorStoreFile</a>), VectorStoreFile(id='file-9XcTuxiJTray6ttcpRf1Kw', created_at=1752663761, last_error=None, object='vector_store.file', status='completed', usage_bytes=3118, vector_store_id='vs_687782eca894819185cc116786181154', attributes={}, chunking_strategy=StaticFileChunkingStrategyObject(static=StaticFileChunkingStrategy(chunk_overlap_tokens=400, max_chunk_size_tokens=800), type='static'))], has_more=False, object='list', first_id='file-ABB2cqjqiMisJchkZfY48q', last_id='file-9XcTuxiJTray6ttcpRf1Kw')</p>
</blockquote>
<h2 id="what-is-the-openai-agents-sdk">What Is the OpenAI Agents SDK?</h2>
<p>Agents are AI assistants that can actually perform tasks autonomously.</p>
<h3 id="building-agents"><strong>Building Agents</strong></h3>
<p><strong>Models</strong>: o1, 03-mini, GPT-4.5, GPT-4o, GPT-4o-mini</p>
<p><strong>Tools</strong>: Function calling, web search, computer use</p>
<p><strong>Knowledge and memory</strong>: Vector stores, file search, embeddings</p>
<p><strong>Guardrails</strong>: Moderation, instruction hierarchy (Python, TypeScript)</p>
<p><strong>Orchestration</strong>: Agents SDK, tracing, evaluations, fine-tuning</p>
<p><strong>Main Building Blocks of Agents SDK</strong></p>
<h3 id="_9">å†…å®¹æ€»ç»“ï¼ˆæ¦‚è¿°ï¼‰</h3>
<p>æœ¬æ¨¡å—ç³»ç»Ÿæ€§ä»‹ç»äº† <strong>OpenAI Agents SDK</strong> åŠå…¶åœ¨æ„å»ºè‡ªæ²»å‹æ™ºèƒ½ä½“ï¼ˆAgentic Applicationsï¼‰ä¸­çš„æ ¸å¿ƒä»·å€¼ã€‚</p>
<p>æ™ºèƒ½ä½“ä¸å†åªæ˜¯è¢«åŠ¨å›ç­”é—®é¢˜çš„æ¨¡å‹ï¼Œè€Œæ˜¯èƒ½å¤ŸåŸºäº<strong>æ¨ç†ã€å·¥å…·è°ƒç”¨ã€çŸ¥è¯†ä¸è®°å¿†</strong>è‡ªä¸»å®Œæˆä»»åŠ¡çš„ AI åŠ©æ‰‹ã€‚OpenAI å°†æ™ºèƒ½ä½“çš„æ„å»ºæ‹†è§£ä¸ºå¤šä¸ªå…³é”®é¢†åŸŸï¼šæ¨¡å‹ï¼ˆModelsï¼‰ã€å·¥å…·ï¼ˆToolsï¼‰ã€çŸ¥è¯†ä¸è®°å¿†ï¼ˆKnowledge &amp; Memoryï¼‰ã€å®‰å…¨é˜²æŠ¤ï¼ˆGuardrailsï¼‰ä»¥åŠç¼–æ’ä¸ç®¡ç†ï¼ˆOrchestrationï¼‰ã€‚</p>
<p>Agents SDK æ˜¯ä¸€ä¸ªè½»é‡ä½†åŠŸèƒ½å¼ºå¤§çš„æ¡†æ¶ï¼Œç”¨äºå°†ä¸Šè¿°èƒ½åŠ›é«˜æ•ˆç»„åˆèµ·æ¥ï¼Œç®€åŒ–å¤æ‚çš„æ™ºèƒ½ä½“å·¥ä½œæµã€‚SDK æä¾›å››ä¸ªæ ¸å¿ƒæ„å»ºæ¨¡å—ï¼š</p>
<ul>
<li><strong>Agents</strong>ï¼šå…·å¤‡æŒ‡ä»¤ä¸å·¥å…·çš„ä¸“ä¸šåŒ– AI å·¥ä½œå•å…ƒ</li>
<li><strong>Handoffs</strong>ï¼šæ”¯æŒä»»åŠ¡åœ¨å¤šä¸ªæ™ºèƒ½ä½“ä¹‹é—´çš„å§”æ´¾ä¸åä½œ</li>
<li><strong>Guardrails</strong>ï¼šç”¨äºè¾“å…¥æ ¡éªŒä¸å®‰å…¨æ§åˆ¶ï¼Œé˜²æ­¢å¼‚å¸¸æˆ–ä¸å½“è¡Œä¸º</li>
<li><strong>Sessions</strong>ï¼šè‡ªåŠ¨ç»´æŠ¤è·¨è½®æ¬¡å¯¹è¯çŠ¶æ€ï¼Œå…å»æ‰‹åŠ¨ä¸Šä¸‹æ–‡ç®¡ç†</li>
</ul>
<p>æ­¤å¤–ï¼ŒSDK å†…å»ºå®Œæ•´çš„ <strong>Agent Loop</strong>ï¼Œè‡ªåŠ¨å¤„ç†å·¥å…·è°ƒç”¨ä¸å¤šæ­¥æ¨ç†æµç¨‹ï¼Œå¹¶åŸç”Ÿæ”¯æŒ Pythonï¼Œä½¿å¼€å‘è€…æ— éœ€å¼•å…¥å¤æ‚æŠ½è±¡å³å¯å¿«é€Ÿæ„å»ºå¤šæ™ºèƒ½ä½“ç³»ç»Ÿã€‚åŒæ—¶ï¼Œå†…ç½®çš„ <strong>Tracing èƒ½åŠ›</strong>å¯ç”¨äºè°ƒè¯•ã€ç›‘æ§ä¸è¯„ä¼°æ™ºèƒ½ä½“è¡Œä¸ºï¼Œå¹¶ä¸ OpenAI å¹³å°çš„è¯„æµ‹ä¸ä¼˜åŒ–å·¥å…·æ·±åº¦é›†æˆã€‚</p>
<blockquote>
<p>OpenAI Agents SDK ä¸ºæ„å»ºè‡ªæ²»å‹ AI ç³»ç»Ÿæä¾›äº†ä¸€ç§å…¼é¡¾ç®€æ´æ€§ä¸æ‰©å±•æ€§çš„å·¥ç¨‹åŒ–æ–¹æ¡ˆã€‚é€šè¿‡å°†æ¨¡å‹èƒ½åŠ›ã€å·¥å…·è°ƒç”¨ã€è®°å¿†ç®¡ç†ä¸å®‰å…¨æœºåˆ¶è¿›è¡Œæ¨¡å—åŒ–æ•´åˆï¼Œå¼€å‘è€…å¯ä»¥ä»å•ä¸€æ™ºèƒ½ä½“å¿«é€Ÿæ¼”è¿›åˆ°å¤æ‚çš„å¤šæ™ºèƒ½ä½“åä½œä½“ç³»ã€‚å…¶å†…ç½®çš„ Agent Loopã€è‡ªåŠ¨ä¼šè¯ç®¡ç†ä¸å¯è§‚æµ‹æ€§è®¾è®¡ï¼Œå¤§å¹…é™ä½äº† Agentic Workflow çš„å®ç°é—¨æ§›ï¼Œä½¿æ™ºèƒ½ä½“åº”ç”¨çœŸæ­£å…·å¤‡å¯è½åœ°ã€å¯ç»´æŠ¤ä¸å¯æ‰©å±•çš„å·¥ç¨‹ä»·å€¼ã€‚</p>
</blockquote>
<p><img alt="Alt Image Text" src="../../images/chap8_0_4.png" title="Body image" />  </p>
<p>ä»¥ä¸‹è¿™æ®µä»£ç å±•ç¤ºäº†å¦‚ä½•ç”¨ Agents SDK æ„å»ºä¸€ä¸ªå…·å¤‡ã€Œè¾“å…¥å®¡æŸ¥ + æ„å›¾ç†è§£ + ä¸“å®¶è·¯ç”±ã€èƒ½åŠ›çš„æœ¬åœ°å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œå¹¶é€šè¿‡ Ollama å®ç°å®Œå…¨ç¦»çº¿è¿è¡Œã€‚</p>
<p>å®ƒä½“ç°äº†ä» Prompt Engineering å‘ Agent System Engineering çš„å…³é”®è½¬å˜ã€‚</p>
<p><strong><code>first_agents_local.py</code></strong></p>
<pre><code>from agents import (
    Agent,
    InputGuardrail,
    GuardrailFunctionOutput,
    Runner,
)
from pydantic import BaseModel
import asyncio
import os
from agents import Agent, Runner

# ---------------------------------------------------------------------
# 0. Ollama OpenAI-compatible configuration
# ---------------------------------------------------------------------

# Ollama ä½¿ç”¨ OpenAI-compatible API
os.environ[&quot;OPENAI_API_KEY&quot;] = &quot;ollama&quot;  # ä»»æ„å€¼å³å¯
os.environ[&quot;OPENAI_BASE_URL&quot;] = &quot;http://localhost:11434/v1&quot;
# å…³é—­ Agents SDK Tracingï¼ˆæœ¬åœ° Ollama å¿…é¡»ï¼‰
os.environ[&quot;OPENAI_TRACING&quot;] = &quot;false&quot;

MODEL_NAME = &quot;qwen2.5:7b&quot;   # æˆ– qwen2.5 / deepseek-r1 ç­‰

# ---------------------------------------------------------------------
# 1. Guardrail: â€œIs this a coding question?â€
# ---------------------------------------------------------------------

class CodeQuestionOutput(BaseModel):
    is_code_question: bool
    reasoning: str


guardrail_agent = Agent(
    name=&quot;Guardrail check&quot;,
    model=MODEL_NAME,
    instructions=&quot;Check if the user is asking about programming.&quot;,
    output_type=CodeQuestionOutput,
)


async def code_question_guardrail(ctx, agent, input_data):
    result = await Runner.run(
        guardrail_agent,
        input_data,
        context=ctx.context,
    )
    final_output = result.final_output_as(CodeQuestionOutput)
    return GuardrailFunctionOutput(
        output_info=final_output,
        tripwire_triggered=not final_output.is_code_question,
    )


# ---------------------------------------------------------------------
# 2. Specialist coding agents
# ---------------------------------------------------------------------

python_tutor_agent = Agent(
    name=&quot;Python Tutor&quot;,
    model=MODEL_NAME,
    handoff_description=&quot;Answers Python-related programming questions&quot;,
    instructions=(
        &quot;You are an expert Python mentor. &quot;
        &quot;Explain concepts clearly and give concise code examples.&quot;
    ),
)

javascript_tutor_agent = Agent(
    name=&quot;JavaScript Tutor&quot;,
    model=MODEL_NAME,
    handoff_description=&quot;Answers JavaScript / TypeScript coding questions&quot;,
    instructions=(
        &quot;You are an expert JavaScript mentor. &quot;
        &quot;Explain concepts clearly and give concise code examples.&quot;
    ),
)

# ---------------------------------------------------------------------
# 3. Triage agent (Manager agent)
# ---------------------------------------------------------------------

triage_agent = Agent(
    name=&quot;Triage Agent&quot;,
    model=MODEL_NAME,
    instructions=(
        &quot;Decide which tutor agent should answer the user's programming question.&quot;
    ),
    handoffs=[python_tutor_agent, javascript_tutor_agent],
    input_guardrails=[
        InputGuardrail(guardrail_function=code_question_guardrail),
    ],
)

# ---------------------------------------------------------------------
# 4. Demo
# ---------------------------------------------------------------------

async def main():
    result = await Runner.run(
        triage_agent,
        &quot;How do I set 1 second delay in JavaScript? Explain shortly.&quot;,
    )
    print(result.final_output)

    print(&quot;\n&quot; + &quot;-&quot; * 40 + &quot;\n&quot;)

    result = await Runner.run(
        triage_agent,
        &quot;How to write a for loop in Python? Explain shortly.&quot;,
    )
    print(result.final_output)

    print(&quot;\n&quot; + &quot;-&quot; * 40 + &quot;\n&quot;)

    result = await Runner.run(
        triage_agent,
        &quot;Who won the World Cup in 1998?&quot;,
    )
    print(result.final_output)


if __name__ == &quot;__main__&quot;:
    asyncio.run(main())
</code></pre>
<h4 id="output">Output</h4>
<pre><code>% python ./first_agents_local.py
[non-fatal] Tracing: request failed: timed out
[non-fatal] Tracing: request failed: timed out
[non-fatal] Tracing: request failed: timed out
[non-fatal] Tracing: max retries reached, giving up on this batch.
[non-fatal] Tracing: request failed: timed out
To set a 1-second delay in JavaScript, you can use the `setTimeout` function. Hereâ€™s a concise example:

javascript
setTimeout(() =&gt; {
    console.log(&quot;This message will be printed after 1 second.&quot;);
}, 1000);


In this code:
- `setTimeout` is called with two arguments: 
  - A function that you want to run after the delay.
  - The duration of the delay in milliseconds (1000 milliseconds = 1 second).

This will log &quot;This message will be printed after 1 second.&quot; to the console after a 1-second delay.

----------------------------------------

[non-fatal] Tracing: request failed: timed out
[non-fatal] Tracing: request failed: timed out
[non-fatal] Tracing: max retries reached, giving up on this batch.
[non-fatal] Tracing: request failed: timed out
[non-fatal] Tracing: request failed: timed out
[non-fatal] Tracing: request failed: timed out
[non-fatal] Tracing: max retries reached, giving up on this batch.
[non-fatal] Tracing: request failed: timed out
1
[non-fatal] Tracing: request failed: timed out
[non-fatal] Tracing: request failed: timed out
[non-fatal] Tracing: max retries reached, giving up on this batch.
Sure! Let's dive into how to write a for loop in Python.

### For Loop Basics

A `for` loop is used when you want to iterate over a sequence (such as a list, tuple, dictionary, set, or string) or any other iterable object. Hereâ€™s a simple example:

python
# Example: Print each number from 1 to 5
numbers = [1, 2, 3, 4, 5]
for number in numbers:
    print(number)


### Looping with Ranges

You can also use the `range` function to generate a sequence of numbers. The `range` function returns an iterator that generates numbers from start (inclusive) to stop (exclusive).

python
# Example: Print numbers from 1 to 5 using range
for i in range(1, 6):
    print(i)


### Looping with Dictionaries

When you want to iterate over the keys, values, or both of a dictionary.

#### Iterating Over Keys:

python
# Example: Print each key in a dictionary
fruits = {&quot;apple&quot;: &quot;red&quot;, &quot;banana&quot;: &quot;yellow&quot;, &quot;cherry&quot;: &quot;red&quot;}
for fruit in fruits:
    print(fruit)


#### Iterating Over Key-Value Pairs:

python
# Example: Print each key-value pair in a dictionary
fruits = {&quot;apple&quot;: &quot;red&quot;, &quot;banana&quot;: &quot;yellow&quot;, &quot;cherry&quot;: &quot;red&quot;}
for fruit, color in fruits.items():
    print(f&quot;{fruit} is {color}&quot;)


#### Iterating Over Values:

python
# Example: Print the value for each key in a dictionary
fruits = {&quot;apple&quot;: &quot;red&quot;, &quot;banana&quot;: &quot;yellow&quot;, &quot;cherry&quot;: &quot;red&quot;}
for color in fruits.values():
    print(color)

### Looping with Strings

You can also use `for` loops to iterate over characters in a string.

python
# Example: Print each character in a string
message = &quot;Hello, world!&quot;
for char in message:
    print(char)


Feel free to ask if you have any specific scenarios or further questions about for loops!

----------------------------------------

[non-fatal] Tracing: request failed: timed out
Traceback (most recent call last):
  File &quot;/Users/jacob/learnspace/ai/agent/openai-responses-api-and-agents-sdk/module_2/./first_agents_local.py&quot;, line 120, in &lt;module&gt;
    asyncio.run(main())
  File &quot;/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py&quot;, line 195, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File &quot;/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py&quot;, line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &quot;/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py&quot;, line 691, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File &quot;/Users/jacob/learnspace/ai/agent/openai-responses-api-and-agents-sdk/module_2/./first_agents_local.py&quot;, line 112, in main
    result = await Runner.run(
             ^^^^^^^^^^^^^^^^^
  File &quot;/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/agents/run.py&quot;, line 367, in run
    return await runner.run(
           ^^^^^^^^^^^^^^^^^
  File &quot;/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/agents/run.py&quot;, line 664, in run
    input_guardrail_results, turn_result = await asyncio.gather(
                                           ^^^^^^^^^^^^^^^^^^^^^
  File &quot;/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/agents/run.py&quot;, line 1776, in _run_input_guardrails
    raise InputGuardrailTripwireTriggered(result)
agents.exceptions.InputGuardrailTripwireTriggered: Guardrail InputGuardrail triggered tripwire
</code></pre>
<p>ä¸‹é¢æˆ‘<strong>ç«™åœ¨ã€ŒAgent / å¤šæ™ºèƒ½ä½“ç³»ç»Ÿè®¾è®¡ä¸“å®¶ã€çš„è§†è§’</strong>ï¼Œå¯¹ä½ è¿™æ®µä»£ç åšä¸€æ¬¡<strong>ç»“æ„åŒ–ã€é€å±‚æ‹†è§£çš„ä¸“ä¸šåˆ†æ</strong>ã€‚æˆ‘ä¼šä¸ä»…è§£é‡Šã€Œå®ƒåšäº†ä»€ä¹ˆã€ï¼Œè¿˜ä¼šè¯´æ˜ã€Œä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ã€ã€Œè®¾è®¡ä¸Šçš„ä¼˜ç‚¹ / éšæ‚£ã€ã€Œåœ¨çœŸå®ç³»ç»Ÿä¸­å¦‚ä½•æ¼”è¿›ã€ã€‚</p>
<h3 id="_10">ä¸€ã€æ•´ä½“æ¶æ„æ€»è§ˆï¼ˆä»ç³»ç»Ÿè§†è§’ï¼‰</h3>
<p>è¿™æ®µä»£ç å®ç°çš„æ˜¯ä¸€ä¸ª<strong>ç»å…¸çš„ä¸‰å±‚ Agent æ¶æ„</strong>ï¼š</p>
<pre><code>User Input
   â”‚
   â–¼
Input Guardrailï¼ˆè¾“å…¥å®‰å…¨/æ„å›¾è¿‡æ»¤ï¼‰
   â”‚
   â–¼
Triage / Manager Agentï¼ˆè·¯ç”±ä¸å†³ç­–ï¼‰
   â”‚
   â”œâ”€â”€ Python Specialist Agent
   â””â”€â”€ JavaScript Specialist Agent
</code></pre>
<p><strong>æ ¸å¿ƒç›®æ ‡</strong>ï¼š</p>
<blockquote>
<p>æ„å»ºä¸€ä¸ªã€Œèƒ½ç†è§£æ„å›¾ â†’ æ ¡éªŒåˆæ³•æ€§ â†’ è‡ªåŠ¨è·¯ç”±åˆ°ä¸“å®¶ã€çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ</p>
</blockquote>
<p>è¿™ä¸æ˜¯èŠå¤©æœºå™¨äººï¼Œè€Œæ˜¯ä¸€ä¸ª<strong>è‡ªæ²»ï¼ˆautonomousï¼‰æ¨ç†ç³»ç»Ÿ</strong>ã€‚</p>
<hr />
<h3 id="_11">äºŒã€æ ¸å¿ƒæ¦‚å¿µé€ä¸€æ‹†è§£</h3>
<h4 id="1-agent-prompt">1ï¸âƒ£ Agentï¼šä¸æ˜¯ Promptï¼Œè€Œæ˜¯ã€Œè§’è‰² + èƒ½åŠ› + è¾¹ç•Œã€</h4>
<p>ä»¥ <code>python_tutor_agent</code> ä¸ºä¾‹ï¼š</p>
<pre><code class="language-python">python_tutor_agent = Agent(
    name=&quot;Python Tutor&quot;,
    model=MODEL_NAME,
    handoff_description=&quot;Answers Python-related programming questions&quot;,
    instructions=&quot;You are an expert Python mentor...&quot;
)
</code></pre>
<p><strong>ä» Agent è®¾è®¡è§’åº¦çœ‹ï¼Œå®ƒåŒ…å« 4 ä¸ªç»´åº¦ï¼š</strong></p>
<table>
<thead>
<tr>
<th>ç»´åº¦</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>ç”¨äºæ¨ç†ä¸ tracing çš„<strong>èº«ä»½æ ‡è¯†</strong></td>
</tr>
<tr>
<td><code>instructions</code></td>
<td>å†³å®š agent çš„<strong>æ€ç»´ä¸è¾“å‡ºé£æ ¼</strong></td>
</tr>
<tr>
<td><code>handoff_description</code></td>
<td>ç»™ <strong>Manager Agent</strong> ç”¨çš„â€œèƒ½åŠ›è¯´æ˜â€</td>
</tr>
<tr>
<td><code>model</code></td>
<td>agent çš„<strong>è®¤çŸ¥èƒ½åŠ›ä¸Šé™</strong></td>
</tr>
</tbody>
</table>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼š
<code>handoff_description</code> <strong>ä¸æ˜¯ç»™ç”¨æˆ·çœ‹çš„</strong>ï¼Œè€Œæ˜¯ç»™ <em>å¦ä¸€ä¸ª LLM</em> çœ‹çš„ã€‚</p>
</blockquote>
<p>è¿™æ„å‘³ç€ä½ å·²ç»åœ¨åšï¼š</p>
<blockquote>
<p><strong>LLM â†’ LLM çš„èƒ½åŠ›åå•†ï¼ˆcapability negotiationï¼‰</strong></p>
</blockquote>
<h3 id="2-guardrail-agent">2ï¸âƒ£ Guardrail Agentï¼šæŠŠâ€œå®‰å…¨â€ä»ä¸šåŠ¡é€»è¾‘ä¸­å‰¥ç¦»</h3>
<pre><code class="language-python">guardrail_agent = Agent(
    name=&quot;Guardrail check&quot;,
    instructions=&quot;Check if the user is asking about programming.&quot;,
    output_type=CodeQuestionOutput,
)
</code></pre>
<p><strong>è¿™æ˜¯ä¸€ä¸ª</strong>ä¸“ç”¨åˆ¤å®š Agent<strong>ï¼Œç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>åªåšä¸€ä»¶äº‹ï¼š<strong>åˆ†ç±» / åˆ¤å®š</strong></li>
<li>ä½¿ç”¨ <code>output_type</code> å¼ºåˆ¶ç»“æ„åŒ–è¾“å‡º</li>
<li>ä¸ä¸»ä¸šåŠ¡ Agent å®Œå…¨è§£è€¦</li>
</ul>
<p><strong>Guardrail çš„è¿è¡Œæ–¹å¼</strong></p>
<pre><code class="language-python">async def code_question_guardrail(ctx, agent, input_data):
    result = await Runner.run(guardrail_agent, input_data)
</code></pre>
<p>ä½ è¿™é‡Œåšäº†ä¸€ä»¶éå¸¸ä¸“ä¸šçš„äº‹ï¼š</p>
<blockquote>
<p><strong>ç”¨ Agent æœ¬èº«ä½œä¸º Guardrailï¼Œè€Œä¸æ˜¯å†™ if/else</strong></p>
</blockquote>
<p><strong>å¥½å¤„ï¼š</strong></p>
<table>
<thead>
<tr>
<th>ä¼ ç»Ÿ if/else</th>
<th>Agent Guardrail</th>
</tr>
</thead>
<tbody>
<tr>
<td>è§„åˆ™æ­»æ¿</td>
<td>è¯­ä¹‰ç†è§£</td>
</tr>
<tr>
<td>ç»´æŠ¤æˆæœ¬é«˜</td>
<td>å¯æ¼”è¿›</td>
</tr>
<tr>
<td>éš¾ä»¥å¤šè¯­è¨€</td>
<td>å¤©ç„¶å¤šè¯­è¨€</td>
</tr>
</tbody>
</table>
<h4 id="3-guardrailfunctionoutput">3ï¸âƒ£ GuardrailFunctionOutputï¼šæ§åˆ¶æµâ€œé—¸é—¨â€</h4>
<pre><code class="language-python">return GuardrailFunctionOutput(
    output_info=final_output,
    tripwire_triggered=not final_output.is_code_question,
)
</code></pre>
<p>è¿™æ˜¯<strong>ç³»ç»Ÿçº§æ§åˆ¶ç‚¹</strong>ï¼š</p>
<ul>
<li>
<p><code>tripwire_triggered = True</code></p>
</li>
<li>
<p>âŒ ç»ˆæ­¢ Agent æµç¨‹</p>
</li>
<li>
<p><code>False</code></p>
</li>
<li>
<p>âœ… æ”¾è¡Œç»™ä¸‹æ¸¸ Agent</p>
</li>
</ul>
<p>ğŸ‘‰ <strong>æ³¨æ„ä¸€ä¸ªå…³é”®è®¾è®¡ç‚¹</strong>ï¼š</p>
<blockquote>
<p>Guardrail å¹¶ä¸â€œå›ç­”ç”¨æˆ·â€ï¼Œ
å®ƒåª<strong>å†³å®šæ˜¯å¦å…è®¸ç³»ç»Ÿç»§ç»­æ€è€ƒ</strong>ã€‚</p>
</blockquote>
<p>è¿™å’Œ Web å®‰å…¨ä¸­çš„ <strong>WAF / API Gateway</strong> æ˜¯åŒä¸€æ€æƒ³ã€‚</p>
<h4 id="4-triage-agentagent-manager">4ï¸âƒ£ Triage Agentï¼šçœŸæ­£çš„â€œAgent Managerâ€</h4>
<pre><code class="language-python">triage_agent = Agent(
    name=&quot;Triage Agent&quot;,
    instructions=&quot;You determine which agent to use...&quot;,
    handoffs=[python_tutor_agent, javascript_tutor_agent],
)
</code></pre>
<p>è¿™æ˜¯æ•´å¥—ç³»ç»Ÿçš„<strong>å¤§è„‘</strong>ã€‚</p>
<p><strong>å®ƒçš„èŒè´£ä¸æ˜¯å›ç­”é—®é¢˜ï¼Œè€Œæ˜¯ï¼š</strong></p>
<ol>
<li>ç†è§£ç”¨æˆ·æ„å›¾</li>
<li>æ¯”è¾ƒ handoffs ä¸­çš„èƒ½åŠ›æè¿°</li>
<li>é€‰æ‹©æœ€åˆé€‚çš„ Agent</li>
<li>æŠŠä¸Šä¸‹æ–‡äº¤æ¥è¿‡å»</li>
</ol>
<p><strong>è¿™æ˜¯å…¸å‹çš„ </strong>LLM-driven routing****</p>
<p>ä¸ä¼ ç»Ÿæ¶æ„å¯¹æ¯”ï¼š</p>
<table>
<thead>
<tr>
<th>ä¼ ç»Ÿç³»ç»Ÿ</th>
<th>Agent ç³»ç»Ÿ</th>
</tr>
</thead>
<tbody>
<tr>
<td>switch / if</td>
<td>è¯­ä¹‰æ¨ç†</td>
</tr>
<tr>
<td>ç¡¬ç¼–ç è·¯ç”±</td>
<td>åŠ¨æ€èƒ½åŠ›åŒ¹é…</td>
</tr>
<tr>
<td>æ‰©å±•æˆæœ¬é«˜</td>
<td>æ–°å¢ Agent å³å¯</td>
</tr>
</tbody>
</table>
<h4 id="5-runnerrun">5ï¸âƒ£ Runner.runï¼šä¸€æ¬¡â€œå—æ§è‡ªæ²»æ‰§è¡Œâ€</h4>
<pre><code class="language-python">result = await Runner.run(triage_agent, input)
</code></pre>
<p>è¿™ä¸€è¡Œå®é™…ä¸Šè§¦å‘äº†ä¸€ä¸ª<strong>å®Œæ•´çš„è‡ªæ²»æ¨ç†å¾ªç¯</strong>ï¼š</p>
<ol>
<li>æ‰§è¡Œ input guardrails</li>
<li>è°ƒç”¨ triage agent</li>
<li>åˆ¤æ–­æ˜¯å¦éœ€è¦ handoff</li>
<li>æ‰§è¡Œè¢«é€‰ä¸­çš„ agent</li>
<li>èšåˆæœ€ç»ˆè¾“å‡º</li>
</ol>
<blockquote>
<p>ä½ å¹¶æ²¡æœ‰å†™æµç¨‹æ§åˆ¶ä»£ç 
<strong>æµç¨‹ç”± Agent è‡ªå·±æ¨å¯¼å‡ºæ¥</strong></p>
</blockquote>
<p>è¿™æ­£æ˜¯ Agents SDK çš„æ ¸å¿ƒä»·å€¼ã€‚</p>
<h3 id="_12">ä¸‰ã€ä»ç³»ç»Ÿå·¥ç¨‹è§’åº¦çš„è¯„ä»·</h3>
<h4 id="1_1">1ï¸âƒ£ èŒè´£åˆ†ç¦»æå…¶æ¸…æ™°</h4>
<ul>
<li>åˆ¤å®š â‰  è·¯ç”± â‰  æ‰§è¡Œ</li>
<li>æ¯ä¸ª Agent éƒ½æ˜¯ <strong>Single Responsibility</strong></li>
</ul>
<h4 id="2">2ï¸âƒ£ å¯æ‰©å±•æ€§æå¼º</h4>
<p>ä½ ç°åœ¨å¯ä»¥è½»æ¾åŠ ï¼š</p>
<pre><code class="language-python">go_tutor_agent
rust_tutor_agent
sql_tutor_agent
</code></pre>
<p><strong>æ— éœ€ä¿®æ”¹ä»»ä½•å·²æœ‰é€»è¾‘</strong></p>
<h4 id="3_2">3ï¸âƒ£ çœŸå®ç”Ÿäº§çº§æ€è·¯</h4>
<ul>
<li>Guardrail</li>
<li>Manager</li>
<li>Specialist</li>
</ul>
<p>è¿™æ˜¯ <strong>AutoGPT / Devin / Copilot å†…éƒ¨å¸¸è§ç»“æ„</strong></p>
<h3 id="_13">âš ï¸ æ½œåœ¨é—®é¢˜ï¼ˆä¸“å®¶è§†è§’ï¼‰</h3>
<h4 id="1_2">1ï¸âƒ£ æ¨ç†æˆæœ¬åé«˜ï¼ˆæœ¬åœ°æ¨¡å‹å°¤å…¶æ˜æ˜¾ï¼‰</h4>
<p>ä¸€æ¬¡è¯·æ±‚ â‰ˆ 3 æ¬¡ LLM è°ƒç”¨</p>
<p>ğŸ‘‰ ä¼˜åŒ–æ–¹å‘ï¼š</p>
<ul>
<li>åˆå¹¶ Guardrail + Triage</li>
<li>æˆ– Guardrail ç”¨ 3B æ¨¡å‹</li>
</ul>
<h4 id="2-guardrail-json">2ï¸âƒ£ Guardrail çš„ JSON ç¨³å®šæ€§</h4>
<p>æœ¬åœ° Ollama æ¨¡å‹å¯èƒ½ï¼š</p>
<ul>
<li>æ¼å­—æ®µ</li>
<li>è¾“å‡ºè‡ªç„¶è¯­è¨€</li>
</ul>
<p>ğŸ‘‰ ç”Ÿäº§ä¸­å»ºè®®ï¼š</p>
<ul>
<li>åœ¨ <code>instructions</code> ä¸­å¼ºåˆ¶ JSON</li>
<li>æˆ– fallback retry</li>
</ul>
<h4 id="3-triage-agent-instructions">3ï¸âƒ£ Triage Agent çš„ instructions åå¼±</h4>
<p>å½“å‰ï¼š</p>
<pre><code class="language-text">You determine which agent to use
</code></pre>
<p>åœ¨å¤æ‚åœºæ™¯ä¸‹ï¼Œå¯èƒ½ï¼š</p>
<ul>
<li>è·¯ç”±ä¸ç¨³å®š</li>
<li>è¯¯é€‰ Agent</li>
</ul>
<p>ğŸ‘‰ ä¸“å®¶å»ºè®®ï¼š</p>
<pre><code class="language-text">Choose exactly one agent whose handoff_description best matches the user's intent.
Do not answer the question yourself.
</code></pre>
<h2 id="openai-agents-sdk">å¯é…ç½®åŒ–æ™ºèƒ½ä½“ï¼šOpenAI Agents SDK çš„å·¥ç¨‹èƒ½åŠ›è§£æ</h2>
<p>OpenAI Agents SDK æä¾›äº†é«˜åº¦å¯é…ç½®çš„æ™ºèƒ½ä½“ï¼ˆAgentï¼‰å®šä¹‰æ–¹å¼ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿæ ¹æ®ä¸šåŠ¡åœºæ™¯çµæ´»å¡‘é€  Agent çš„è¡Œä¸ºã€èƒ½åŠ›ä¸è¾“å‡ºå½¢å¼ã€‚é€šè¿‡ä¸€ç»„æ¸…æ™°çš„é…ç½®é¡¹ï¼ŒAgent ä¸å†æ˜¯å›ºå®šé€»è¾‘çš„å¯¹è¯æ¨¡å‹ï¼Œè€Œæ˜¯å¯æ§ã€å¯ç»„åˆçš„æ‰§è¡Œå•å…ƒã€‚</p>
<p>åœ¨åŸºç¡€é…ç½®å±‚é¢ï¼Œæ¯ä¸ª Agent éƒ½éœ€è¦ä¸€ä¸ªå”¯ä¸€çš„ <strong>Name</strong>ï¼Œç”¨äºæ—¥å¿—ã€Tracing å’Œè¿è¡Œç›‘æ§ã€‚<strong>Instructions</strong> ç›¸å½“äºç³»ç»Ÿçº§æŒ‡ä»¤ï¼Œç”¨äºå®šä¹‰ Agent çš„èŒè´£ä¸è¡Œä¸ºå‡†åˆ™ï¼›è€Œ <strong>Model</strong> åˆ™æ˜ç¡®æŒ‡å®šæ‰€ä½¿ç”¨çš„ LLMã€‚ä¸ä¼ ç»Ÿæ¥å£ä¸åŒï¼ŒAgent å¯ä»¥ç›´æ¥å°†è‡ªå®šä¹‰å‡½æ•°ä½œä¸º <strong>Tools</strong> æŒ‚è½½ï¼Œä»è€Œå®ç°æ›´ç´§å¯†çš„ä¸šåŠ¡èƒ½åŠ›é›†æˆã€‚</p>
<p><strong>Context</strong> æ˜¯ Agents SDK ä¸­æå…·å·¥ç¨‹ä»·å€¼çš„ä¸€é¡¹èƒ½åŠ›ï¼Œç”¨äºåœ¨ Agentã€å·¥å…·ä»¥åŠå¤šæ¬¡ Handoff ä¹‹é—´å…±äº«ç»“æ„åŒ–ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·èº«ä»½ã€è®¢é˜…çŠ¶æ€æˆ–ä¸šåŠ¡ ID éƒ½å¯ä»¥é€šè¿‡ Context æ³¨å…¥ï¼Œå¹¶åœ¨æ•´ä¸ªå·¥ä½œæµä¸­ä¿æŒä¸€è‡´ã€‚è¿™ç§è®¾è®¡é¿å…äº†é‡å¤æŸ¥è¯¢ä¸çŠ¶æ€åŒæ­¥é—®é¢˜ï¼Œä½¿å¤š Agent åä½œæ›´åŠ ç¨³å®šã€å¯é¢„æµ‹ã€‚</p>
<p>åœ¨è¾“å‡ºæ§åˆ¶æ–¹é¢ï¼ŒSDK æ”¯æŒä¸º Agent å®šä¹‰ä¸¥æ ¼çš„ <strong>Output Schema</strong>ï¼Œä¾‹å¦‚åªå…è®¸è¿”å›ç‰¹å®šçš„æ•°æ®ç»“æ„ã€‚</p>
<p><strong>è¿™ä¸€èƒ½åŠ›å¯¹äºå¤š Agent ç¼–æ’å°¤ä¸ºå…³é”®ï¼Œèƒ½å¤Ÿæ˜¾è‘—é™ä½è¾“å‡ºæ­§ä¹‰ä¸æ¨¡å‹å¹»è§‰ï¼Œæå‡ç³»ç»Ÿæ•´ä½“çš„å¯é æ€§ã€‚</strong></p>
<p>æ­¤å¤–ï¼ŒAgent çš„ <strong>Instructions</strong> è¿˜å¯ä»¥æ ¹æ®è¿è¡Œæ—¶æ¡ä»¶åŠ¨æ€ç”Ÿæˆï¼Œä½¿å…¶åœ¨ä¸åŒåœºæ™¯ä¸‹å±•ç°ä¸åŒç­–ç•¥ï¼Œä»è€Œæ„å»ºæ›´å…·å¼¹æ€§çš„æ™ºèƒ½ä½“è¡Œä¸ºæ¨¡å‹ã€‚</p>
<p>æœ€åï¼Œé€šè¿‡ <strong>Tool Use Settings</strong>ï¼Œå¼€å‘è€…å¯ä»¥ç²¾ç¡®æ§åˆ¶å·¥å…·è°ƒç”¨ç­–ç•¥â€”â€”ä»å®Œå…¨è‡ªåŠ¨å†³ç­–ï¼Œåˆ°å¼ºåˆ¶è°ƒç”¨æŒ‡å®šå·¥å…·ï¼Œç¡®ä¿ Agent è¡Œä¸ºç¬¦åˆä¸šåŠ¡é¢„æœŸã€‚</p>
<blockquote>
<p>é€šè¿‡é«˜åº¦ç»“æ„åŒ–çš„é…ç½®èƒ½åŠ›ï¼ŒOpenAI Agents SDK å°†æ™ºèƒ½ä½“ä»â€œä¸å¯æ§çš„å¯¹è¯æ¨¡å‹â€è½¬å˜ä¸ºâ€œå¯ç¼–æ’ã€å¯çº¦æŸã€å¯æ¼”è¿›çš„å·¥ç¨‹ç»„ä»¶â€ï¼Œä¸ºæ„å»ºå¤æ‚ Agent ç³»ç»Ÿæä¾›äº†åšå®åŸºç¡€ã€‚</p>
</blockquote>
<h3 id="basic-configuration">Basic Configuration</h3>
<p>ä¸‹é¢æ˜¯<strong>å›¾ç‰‡ä¸­ä»£ç çš„å®Œæ•´æ–‡æœ¬ç‰ˆï¼ˆå·²é€è¡Œè¿˜åŸï¼Œå¯ç›´æ¥å¤åˆ¶è¿è¡Œï¼‰</strong>ï¼š</p>
<pre><code class="language-python">from agents import Agent, ModelSettings, function_tool


@function_tool
def get_favorite_food(animal: str) -&gt; str:
    return f&quot;{animal.capitalize()}'s favorite food is something tasty.&quot;


agent = Agent(
    name=&quot;FunFactsAgent&quot;,
    instructions=&quot;Always answer in a short and fun sentence for kids.&quot;,
    model=&quot;o3-mini&quot;,
    tools=[get_favorite_food],
)
</code></pre>
<p><strong>ç®€è¦è¯´æ˜ï¼ˆä¾¿äºä½ å†™åšå®¢æ—¶ç”¨ï¼‰</strong></p>
<ul>
<li><code>@function_tool</code>ï¼šå°†æ™®é€š Python å‡½æ•°æ³¨å†Œä¸º Agent å¯è°ƒç”¨çš„å·¥å…·</li>
<li><code>Agent(...)</code>ï¼šå®šä¹‰ä¸€ä¸ªå…·å¤‡<strong>æŒ‡ä»¤ + æ¨¡å‹ + å·¥å…·</strong>çš„æ™ºèƒ½ä½“</li>
<li><code>instructions</code>ï¼šç­‰ä»·äº system promptï¼Œç”¨äºçº¦æŸ Agent çš„é£æ ¼ä¸è¡Œä¸º</li>
<li><code>tools</code>ï¼šç›´æ¥ç»‘å®šå‡½æ•°ï¼Œæ— éœ€æ‰‹åŠ¨å†™ function schema</li>
</ul>
<p><strong>Context Configuration</strong></p>
<p>ä¸‹é¢æ˜¯<strong>å›¾ç‰‡ä¸­ä»£ç çš„å®Œæ•´æ–‡æœ¬ç‰ˆï¼ˆæŒ‰åŸæ ·è¿˜åŸï¼Œå¯ç›´æ¥ç²˜è´´ä½¿ç”¨ï¼‰</strong>ï¼š</p>
<pre><code class="language-python">from dataclasses import dataclass


@dataclass
class UserContext:
    uid: str
    is_pro_user: bool


async def fetch_purchases() -&gt; list[Purchase]:
    return ...


agent = Agent[UserContext](
    ...
)
</code></pre>
<h4 id="_14">ä»£ç è¦ç‚¹ï¼ˆå¯ç”¨äºåšå®¢è¯´æ˜ï¼‰</h4>
<ul>
<li><code>UserContext</code>ï¼šä½¿ç”¨ <code>@dataclass</code> å®šä¹‰ <strong>Agent Context</strong>ï¼Œç”¨äºåœ¨æ•´ä¸ª agent workflow ä¸­å…±äº«ç”¨æˆ·çŠ¶æ€</li>
<li><code>uid</code> / <code>is_pro_user</code>ï¼šå…¸å‹çš„è·¨å·¥å…·ã€è·¨ handoff å¯å¤ç”¨ä¸Šä¸‹æ–‡ä¿¡æ¯</li>
<li><code>Agent[UserContext]</code>ï¼šé€šè¿‡æ³›å‹æ–¹å¼ï¼Œå°† context ç±»å‹ä¸ Agent ç»‘å®šï¼Œå®ç° <strong>ç±»å‹å®‰å…¨çš„ä¸Šä¸‹æ–‡è®¿é—®</strong></li>
<li><code>context</code> åœ¨ Agents SDK ä¸­æ˜¯ <strong>åªè¯»å…±äº«</strong>ï¼Œä¸ä¼šå›  handoff æ”¹å˜ï¼Œéå¸¸é€‚åˆæƒé™ã€ç”¨æˆ·æ€ã€ä¼šè¯ä¿¡æ¯</li>
</ul>
<h3 id="output-configuration">Output Configuration</h3>
<p>ä¸‹é¢æ˜¯<strong>å›¾ç‰‡ä¸­ä»£ç çš„å®Œæ•´æ–‡æœ¬è¿˜åŸç‰ˆ</strong>ï¼ˆå·²æ•´ç†ä¸ºå¯ç›´æ¥ä½¿ç”¨çš„ Python ä»£ç ï¼‰ï¼š</p>
<pre><code class="language-python">from pydantic import BaseModel
from agents import Agent


class CalendarEvent(BaseModel):
    name: str
    date: str
    participants: list[str]


agent = Agent(
    name=&quot;Calendar extractor&quot;,
    instructions=&quot;Extract calendar events from text&quot;,
    output_type=CalendarEvent,
)
</code></pre>
<h4 id="agents-sdk">è¿™æ®µä»£ç åœ¨ Agents SDK ä¸­çš„æŠ€æœ¯å«ä¹‰ï¼ˆéå¸¸é€‚åˆå†™è¿›åšå®¢ï¼‰</h4>
<p><strong>1ï¸âƒ£ ä½¿ç”¨ <code>output_type</code> å¼ºçº¦æŸ Agent è¾“å‡º</strong></p>
<ul>
<li><code>CalendarEvent</code> ç»§æ‰¿è‡ª <code>Pydantic BaseModel</code></li>
<li>Agent çš„è¾“å‡º <strong>å¿…é¡»</strong> ç¬¦åˆè¯¥ç»“æ„ï¼Œå¦åˆ™ä¼šè‡ªåŠ¨é‡è¯•æˆ–å¤±è´¥</li>
<li>è¿™æ˜¯ <strong>é™ä½å¹»è§‰ï¼ˆHallucinationï¼‰</strong> çš„å…³é”®æœºåˆ¶</li>
</ul>
<p><strong>2ï¸âƒ£ Agent ä¸å†â€œè‡ªç”±ç”Ÿæˆæ–‡æœ¬â€ï¼Œè€Œæ˜¯â€œç»“æ„åŒ–æŠ½å–â€</strong></p>
<ul>
<li>
<p>éå¸¸é€‚åˆï¼š</p>
</li>
<li>
<p>æ—¥ç¨‹ / è¡¨å• / å·¥å• / å®ä½“æŠ½å–</p>
</li>
<li>ä¸‹æ¸¸ç³»ç»Ÿè‡ªåŠ¨æ¶ˆè´¹ï¼ˆAPIã€æ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ï¼‰</li>
</ul>
<p><strong>3ï¸âƒ£ ä¸å¤š Agent ç¼–æ’å¤©ç„¶å…¼å®¹</strong></p>
<ul>
<li>ä¸Šæ¸¸ Agentï¼šè´Ÿè´£ç†è§£è‡ªç„¶è¯­è¨€</li>
<li>ä¸‹æ¸¸ Agentï¼šåªæ¥æ”¶ <code>CalendarEvent</code> ç±»å‹ï¼Œé›¶è§£ææˆæœ¬</li>
</ul>
<blockquote>
<p>ğŸ“Œ <strong>ä¸€å¥åšå®¢çº§æ€»ç»“</strong>
é€šè¿‡ <code>output_type</code> + Pydanticï¼ŒAgents SDK å°† LLM ä»â€œæ–‡æœ¬ç”Ÿæˆå™¨â€å‡çº§ä¸ºâ€œç±»å‹å®‰å…¨çš„ç»“æ„åŒ–æ•°æ®ç”Ÿäº§è€…â€ã€‚</p>
</blockquote>
<h3 id="dynamic-instructions">Dynamic Instructions</h3>
<pre><code class="language-python">def dynamic_instructions(
    context: RunContextWrapper[UserContext],
    agent: Agent[UserContext],
) -&gt; str:
    return (
        f&quot;The user's name is {context.context.name}. &quot;
        &quot;Help them with their questions.&quot;
    )


agent = Agent[UserContext](
    name=&quot;Triage agent&quot;,
    instructions=dynamic_instructions,
)
</code></pre>
<h4 id="agents-sdk_1">ğŸ“Œ è¿™æ®µä»£ç åœ¨ Agents SDK ä¸­çš„æ ¸å¿ƒæ„ä¹‰ï¼ˆåšå®¢å¯ç›´æ¥ä½¿ç”¨ï¼‰</h4>
<p><strong>1ï¸âƒ£ Instructions ä¸å†æ˜¯é™æ€å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯å‡½æ•°</strong></p>
<ul>
<li><code>instructions</code> å¯ä»¥æ˜¯ä¸€ä¸ª callable</li>
<li>åœ¨ <strong>æ¯æ¬¡ Agent è¿è¡Œå‰åŠ¨æ€ç”Ÿæˆ system prompt</strong></li>
<li>èƒ½åŸºäºç”¨æˆ·ã€çŠ¶æ€ã€ç¯å¢ƒå®æ—¶è°ƒæ•´è¡Œä¸º</li>
</ul>
<p><strong>2ï¸âƒ£ <code>RunContextWrapper</code> æ˜¯åŠ¨æ€ä¸Šä¸‹æ–‡çš„å…¥å£</strong></p>
<ul>
<li><code>context.context</code> å³ä½ å®šä¹‰çš„ <code>UserContext</code></li>
<li>
<p>å¯å®‰å…¨è®¿é—®ï¼š</p>
</li>
<li>
<p>ç”¨æˆ·ä¿¡æ¯</p>
</li>
<li>ä¼šè¯çŠ¶æ€</li>
<li>ä¸Šæ¸¸ Agent ä¼ é€’çš„æ•°æ®</li>
</ul>
<p><strong>3ï¸âƒ£ éå¸¸é€‚åˆ Triage / Router / Personalization Agent</strong></p>
<p>å…¸å‹ä½¿ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>æ ¹æ®ç”¨æˆ·ç­‰çº§ï¼ˆPro / Freeï¼‰æ”¹å˜å›ç­”ç­–ç•¥</li>
<li>æ ¹æ®å†å²è¡Œä¸ºå†³å®šæ˜¯å¦å‡çº§ã€è½¬äº¤ã€è°ƒç”¨å·¥å…·</li>
<li>å¤š Agent ç³»ç»Ÿä¸­çš„ <strong>å…¥å£è°ƒåº¦ Agent</strong></li>
</ul>
<blockquote>
<p>ğŸ§  <strong>ä¸€å¥ä¸“ä¸šæ€»ç»“ï¼ˆå¯æ”¾åœ¨åšå®¢æ­£æ–‡ï¼‰</strong>
Dynamic instructions è®© Agent çš„ system prompt ä»â€œé™æ€é…ç½®â€å‡çº§ä¸ºâ€œè¿è¡Œæ—¶å†³ç­–é€»è¾‘â€ï¼Œè¿™æ˜¯æ„å»ºæ™ºèƒ½åˆ†æµä¸ä¸ªæ€§åŒ– Agent çš„å…³é”®èƒ½åŠ›ã€‚</p>
</blockquote>
<h3 id="forcing-tool-use">Forcing Tool Use</h3>
<pre><code>ModelSettings (tool_choice-None)
# default â†’ &quot;auto&quot; (LLM decides)

ModelSettings (tool_choice=&quot;required&quot; )
# must call a tool

ModelSettings (tool_choice=&quot;none&quot;)
# no tool allowed

ModelSettings (tool_choice=&quot;my_tool&quot;)
# must call that specific tool
</code></pre>
<h2 id="orchestrating-multi-step-workflows">Orchestrating Multi-step Workflows</h2>
<p>åœ¨å®Œæˆå•ä¸ª Agent çš„é…ç½®ä¹‹åï¼ŒOpenAI Agents SDK çš„æ ¸å¿ƒèƒ½åŠ›ä½“ç°åœ¨<strong>å¤š Agent å·¥ä½œæµçš„ç¼–æ’ï¼ˆOrchestrationï¼‰</strong>ä¸Šã€‚SDK æä¾›ä¸‰ç§è¿è¡Œæ–¹å¼ï¼š</p>
<ul>
<li>å¼‚æ­¥è¿è¡Œ</li>
<li>åŒæ­¥è¿è¡Œ</li>
<li>æµå¼è¿è¡Œ</li>
</ul>
<p>å…¶ä¸­ <strong>æµå¼è¿è¡Œï¼ˆstreamed runsï¼‰</strong> æ˜¯å®é™…ç”Ÿäº§ç¯å¢ƒä¸­çš„æ¨èæ–¹å¼ï¼Œå¯æ˜¾è‘—é™ä½ç”¨æˆ·æ„ŸçŸ¥çš„å“åº”å»¶è¿Ÿã€‚</p>
<p>Agent çš„æ‰§è¡Œæœ¬è´¨ä¸Šç”±ä¸€ä¸ª <strong>Agent Loopï¼ˆæ™ºèƒ½ä½“å¾ªç¯ï¼‰</strong> é©±åŠ¨ï¼šRunner ä»¥åˆå§‹ Agent å’Œè¾“å…¥ä¸ºèµ·ç‚¹ï¼Œè°ƒç”¨ LLM ç”Ÿæˆè¾“å‡ºã€‚å¦‚æœè¾“å‡ºå·²ç»æ»¡è¶³ç›®æ ‡ç±»å‹ä¸”ä¸åŒ…å«å·¥å…·è°ƒç”¨æˆ– Agent äº¤æ¥ï¼ˆhandoffï¼‰ï¼Œå¾ªç¯ç«‹å³ç»“æŸï¼›</p>
<p><img alt="Alt Image Text" src="../../images/chap8_0_5.png" title="Body image" />  </p>
<p><strong>å¦åˆ™ç³»ç»Ÿå°†æ ¹æ®è¾“å‡ºè§¦å‘å·¥å…·è°ƒç”¨æˆ–åˆ‡æ¢åˆ°æ–°çš„ Agentï¼Œå¹¶åœ¨æ›´æ–°ä¸Šä¸‹æ–‡åç»§ç»­ä¸‹ä¸€è½®å¾ªç¯ã€‚ä¸ºé˜²æ­¢æ— é™å¾ªç¯ï¼ŒSDK é€šè¿‡ <code>max_turns</code> å‚æ•°å¼ºåˆ¶é™åˆ¶æœ€å¤§è¿­ä»£æ¬¡æ•°ã€‚</strong></p>
<p>åœ¨å¤š Agent åœºæ™¯ä¸‹ï¼Œå¯¹è¯çŠ¶æ€ç®¡ç†å°¤ä¸ºå…³é”®ã€‚</p>
<p>å¼€å‘è€…æ—¢å¯ä»¥æ‰‹åŠ¨ç»´æŠ¤è¾“å…¥å†å²ï¼ˆå¦‚ä½¿ç”¨ <code>to_input_list</code>ï¼‰ï¼Œä¹Ÿå¯ä»¥å€ŸåŠ© <strong>Session æœºåˆ¶</strong>ï¼ˆå¦‚ <code>SQLiteSession</code>ï¼‰è‡ªåŠ¨å®Œæˆä¸Šä¸‹æ–‡çš„è¯»å–ä¸æŒä¹…åŒ–ï¼Œä»è€Œç®€åŒ–å¤šè½®å¯¹è¯å’Œå¤šä¼šè¯éš”ç¦»çš„å¤æ‚åº¦ã€‚</p>
<p>åœ¨ç¼–æ’ç­–ç•¥ä¸Šï¼ŒAgents SDK æ”¯æŒä¸¤ç§ä¸»æµæ¨¡å¼ï¼š</p>
<ul>
<li>
<p><strong>LLM é©±åŠ¨çš„ç¼–æ’</strong>ï¼šç”±æ¨¡å‹è‡ªä¸»è§„åˆ’æ­¥éª¤ã€é€‰æ‹©å·¥å…·å’Œ Agentï¼Œé€‚åˆé«˜çµæ´»æ€§ä¸å¤æ‚æ¨ç†åœºæ™¯ï¼Œä½†éœ€è¦æ¸…æ™°çš„çº¦æŸã€åé¦ˆæœºåˆ¶ä¸è¯„ä¼°ä½“ç³»ï¼ˆå¦‚ Evalsï¼‰ã€‚</p>
<ul>
<li>Design clear and effective prompts</li>
<li>Monitor and enable agent self-improvement</li>
<li>Use specialized agents</li>
<li>Research evals</li>
</ul>
</li>
</ul>
<blockquote>
<p>https://platform.openai.com/docs/guides/evals</p>
</blockquote>
<ul>
<li>
<p><strong>ä»£ç é©±åŠ¨çš„ç¼–æ’</strong>ï¼šé€šè¿‡æ˜¾å¼ä»£ç æ§åˆ¶ Agent çš„æ‰§è¡Œé¡ºåºã€ä¾èµ–å…³ç³»å’Œå¹¶è¡Œæ–¹å¼ï¼Œæ›´å…·ç¡®å®šæ€§ã€å¯é¢„æµ‹æ€§å’Œå·¥ç¨‹å¯æ§æ€§ï¼Œé€‚åˆå¯¹æ€§èƒ½ã€æˆæœ¬å’Œç¨³å®šæ€§è¦æ±‚è¾ƒé«˜çš„ç³»ç»Ÿã€‚</p>
<ul>
<li>Use structured outputs</li>
<li>Chain multiple agents</li>
<li>Use feedback loops for quality control</li>
<li>Speed up with parallel agents</li>
</ul>
</li>
</ul>
<p>ä¸¤ç§æ–¹å¼å¯ä»¥ç»“åˆä½¿ç”¨ï¼Œä»¥åœ¨æ™ºèƒ½æ€§ä¸å¯æ§æ€§ä¹‹é—´å–å¾—å¹³è¡¡ã€‚</p>
<p><strong>äºŒã€æŠ€æœ¯æ–‡ç« ä¸“ä¸šè¡¨è¿°ï¼ˆå¯ç›´æ¥å¼•ç”¨ï¼‰</strong></p>
<blockquote>
<p>**Agents SDK é€šè¿‡å†…ç½®çš„ Agent Loopã€Session ç®¡ç†ä¸çµæ´»çš„ç¼–æ’æœºåˆ¶ï¼Œå°†å¤š Agent åä½œä»â€œæ¦‚å¿µè®¾è®¡â€è½åœ°ä¸ºå¯æ§ã€å¯æ‰©å±•çš„å·¥ç¨‹å®è·µï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿåœ¨æ¨¡å‹è‡ªä¸»å†³ç­–ä¸ä»£ç ç¡®å®šæ€§æ§åˆ¶ä¹‹é—´è‡ªç”±æƒè¡¡ï¼Œæ„å»ºé«˜æ€§èƒ½ã€å¯ç»´æŠ¤çš„</p>
</blockquote>
<h3 id="manage-agent-conversation">Manage Agent Conversation</h3>
<p>å¥½çš„ï¼Œä¸‹é¢æ˜¯<strong>æ ¹æ®ä½ ç»™å‡ºçš„æˆªå›¾å®Œæ•´è¿˜åŸå¹¶æ•´ç†åçš„ä»£ç å†…å®¹</strong>ï¼ˆç›´æ¥å¯å¤åˆ¶ä½¿ç”¨ï¼‰ï¼š</p>
<pre><code class="language-python">async def main():
    agent = Agent(
        name=&quot;QuickMath&quot;,
        instructions=&quot;Answer with only the final number.&quot;,
    )

    thread_id = &quot;thread_1&quot;

    with trace(workflow_name=&quot;MathSession&quot;, group_id=thread_id):
        # First turn
        result = await Runner.run(
            agent,
            &quot;What is 12 times 8?&quot;
        )
        print(result.final_output)

        # Second turn
        new_input = result.to_input_list() + [
            {
                &quot;role&quot;: &quot;user&quot;,
                &quot;content&quot;: &quot;Now divide it by 4.&quot;
            }
        ]

        result = await Runner.run(
            agent,
            new_input
        )
        print(result.final_output)
</code></pre>
<h4 id="_15">ä»£ç è¦ç‚¹è¯´æ˜ï¼ˆç®€è¦ï¼‰</h4>
<ul>
<li><strong><code>Agent</code></strong>ï¼šå®šä¹‰äº†ä¸€ä¸ªåªè¾“å‡ºæœ€ç»ˆæ•°å€¼çš„æ•°å­¦ Agent</li>
<li><strong><code>trace(...)</code></strong>ï¼šç”¨äºå°†ä¸¤æ¬¡è°ƒç”¨å½’å±åˆ°åŒä¸€ä¸ª workflow / threadï¼Œä¾¿äºè°ƒè¯•å’Œå¯è§†åŒ–</li>
<li><strong><code>result.to_input_list()</code></strong>ï¼šæ‰‹åŠ¨æ‹¼æ¥ä¸Šä¸€è½®å¯¹è¯å†å²ï¼Œå®ç°â€œå®¢æˆ·ç«¯ä¾§çš„ä¸Šä¸‹æ–‡å»¶ç»­â€</li>
<li><strong>ç¬¬äºŒè½®è°ƒç”¨</strong>ï¼šå¹¶ä¸ä¼šè‡ªåŠ¨è®°å¿†ä¸Šä¸‹æ–‡ï¼Œè€Œæ˜¯æ˜¾å¼æŠŠå†å²ä¼ å› Runner</li>
</ul>
<h3 id="automatically-manage-conversations-with-sessions">Automatically Manage Conversations with Sessions</h3>
<pre><code class="language-python">async def main():
    agent = Agent(
        name=&quot;AnimalHelper&quot;,
        instructions=&quot;Give short and clear answers about animals.&quot;,
    )

    # Create session instance
    session = SQLiteSession(&quot;animal_chat_001&quot;)

    with trace(
        workflow_name=&quot;AnimalTalk&quot;,
        group_id=&quot;animal_group_001&quot;
    ):
        # First turn
        result = await Runner.run(
            agent,
            &quot;What animal is the biggest in the ocean?&quot;,
            session=session
        )
        print(result.final_output)

        # Second turn
        result = await Runner.run(
            agent,
            &quot;How much does it weigh?&quot;,
            session=session
        )
        print(result.final_output)
</code></pre>
<ul>
<li>
<p><strong><code>SQLiteSession</code></strong>
  ç”¨äº<strong>è‡ªåŠ¨æŒä¹…åŒ–å¯¹è¯å†å²</strong>ï¼Œæ— éœ€æ‰‹åŠ¨æ‹¼æ¥ <code>to_input_list()</code></p>
</li>
<li>
<p><strong>åŒä¸€ä¸ª <code>session</code></strong>
  ç¬¬äºŒè½®é—®é¢˜ <em>â€œHow much does it weigh?â€</em> èƒ½æ­£ç¡®ç†è§£ä¸Šä¸‹æ–‡ï¼ˆæŒ‡è“é²¸ï¼‰</p>
</li>
<li>
<p><strong>ä¸å‰ä¸€ä¸ªç¤ºä¾‹çš„å¯¹æ¯”</strong></p>
</li>
<li>
<p>âŒ æ‰‹åŠ¨ç®¡ç†ï¼š<code>result.to_input_list()</code></p>
</li>
<li>âœ… è‡ªåŠ¨ç®¡ç†ï¼š<code>SQLiteSession</code></li>
</ul>
<p>ä¸€å¥éå¸¸é€‚åˆæ”¾åœ¨åšå®¢é‡Œçš„æ€»ç»“æ˜¯ï¼š</p>
<blockquote>
<p><strong>Session å°† Agent ä»â€œæ— çŠ¶æ€å‡½æ•°è°ƒç”¨â€å‡çº§ä¸ºâ€œæœ‰è®°å¿†çš„å¯¹è¯ç³»ç»Ÿâ€ï¼Œæ˜¯æ„å»ºçœŸå®åº”ç”¨çš„å…³é”®èƒ½åŠ›ã€‚</strong></p>
</blockquote>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023-9999 Jacob Xi
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>